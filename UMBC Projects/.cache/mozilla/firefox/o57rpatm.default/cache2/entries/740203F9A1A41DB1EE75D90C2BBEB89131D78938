/*
 * Copyright 2005 Joe Walker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Declare an object to which we can add real functions.
 */
if (dwr == null) var dwr = {};
if (dwr.util == null) dwr.util = {};
if (DWRUtil == null) var DWRUtil = dwr.util;

/** @private The flag we use to decide if we should escape html */
dwr.util._escapeHtml = true;

/**
 * Set the global escapeHtml flag
 */
dwr.util.setEscapeHtml = function(escapeHtml) {
  dwr.util._escapeHtml = escapeHtml;
};

/** @private Work out from an options list and global settings if we should be esccaping */
dwr.util._shouldEscapeHtml = function(options) {
  if (options && options.escapeHtml != null) {
    return options.escapeHtml;
  }
  return dwr.util._escapeHtml;
};

/**
 * Return a string with &, < and > replaced with their entities
 * @see TODO
 */
dwr.util.escapeHtml = function(original) {
  return original.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
};

/**
 * Replace common XML entities with characters (see dwr.util.escapeHtml())
 * @see TODO
 */
dwr.util.unescapeHtml = function(original) {
  return original.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>');
};

/**
 * Replace characters dangerous for XSS reasons with visually similar characters
 * @see TODO
 */
dwr.util.replaceXmlCharacters = function(original) {
  original = original.replace("&", "+");
  original = original.replace("<", "\u2039");
  original = original.replace(">", "\u203A");
  original = original.replace("\'", "\u2018");
  original = original.replace("\"", "\u201C");
  return original;
};

/**
 * Return true iff the input string contains any XSS dangerous characters
 * @see TODO
 */
dwr.util.containsXssRiskyCharacters = function(original) {
  return (original.indexOf('&') != -1
    || original.indexOf('<') != -1
    || original.indexOf('>') != -1
    || original.indexOf('\'') != -1
    || original.indexOf('\"') != -1);
};

/**
 * Enables you to react to return being pressed in an input
 * @see http://getahead.org/dwr/browser/util/selectrange
 */
dwr.util.onReturn = function(event, action) {
  if (!event) event = window.event;
  if (event && event.keyCode && event.keyCode == 13) action();
};

/**
 * Select a specific range in a text box. Useful for 'google suggest' type functions.
 * @see http://getahead.org/dwr/browser/util/selectrange
 */
dwr.util.selectRange = function(ele, start, end) {
  ele = dwr.util._getElementById(ele, "selectRange()");
  if (ele == null) return;
  if (ele.setSelectionRange) {
    ele.setSelectionRange(start, end);
  }
  else if (ele.createTextRange) {
    var range = ele.createTextRange();
    range.moveStart("character", start);
    range.moveEnd("character", end - ele.value.length);
    range.select();
  }
  ele.focus();
};

/**
 * Find the element in the current HTML document with the given id or ids
 * @see http://getahead.org/dwr/browser/util/$
 */
if (document.getElementById) {
  dwr.util.byId = function() {
    var elements = new Array();
    for (var i = 0; i < arguments.length; i++) {
      var element = arguments[i];
      if (typeof element == 'string') {
        element = document.getElementById(element);
      }
      if (arguments.length == 1) {
        return element;
      }
      elements.push(element);
    }
    return elements;
  };
}
else if (document.all) {
  dwr.util.byId = function() {
    var elements = new Array();
    for (var i = 0; i < arguments.length; i++) {
      var element = arguments[i];
      if (typeof element == 'string') {
        element = document.all[element];
      }
      if (arguments.length == 1) {
        return element;
      }
      elements.push(element);
    }
    return elements;
  };
}

/**
 * Alias $ to dwr.util.byId
 * @see http://getahead.org/dwr/browser/util/$
 */
var $;
if (!$) {
  $ = dwr.util.byId;
}

/**
 * This function pretty-prints simple data or whole object graphs, f ex as an aid in debugging.
 * @see http://getahead.org/dwr/browser/util/todescriptivestring
 */
dwr.util.toDescriptiveString = function(data, showLevels, options) {
  if (showLevels === undefined) showLevels = 1;
  var opt = {};
  if (dwr.util._isObject(options)) opt = options;
  var defaultoptions = {
    escapeHtml:false,
    baseIndent: "",
    childIndent: "\u00A0\u00A0",
    lineTerminator: "\n",
    oneLineMaxItems: 5,
    shortStringMaxLength: 13,
    propertyNameMaxLength: 30
  };
  for (var p in defaultoptions) {
    if (!(p in opt)) {
      opt[p] = defaultoptions[p];
    }
  }

  var skipDomProperties = {
    document:true, ownerDocument:true,
    all:true,
    parentElement:true, parentNode:true, offsetParent:true,
    children:true, firstChild:true, lastChild:true,
    previousSibling:true, nextSibling:true,
    innerHTML:true, outerHTML:true,
    innerText:true, outerText:true, textContent:true,
    attributes:true,
    style:true, currentStyle:true, runtimeStyle:true,
    parentTextEdit:true
  };

  function recursive(data, showLevels, indentDepth, options) {
    var reply = "";
    try {
      // string
      if (typeof data == "string") {
        var str = data;
        if (showLevels == 0 && str.length > options.shortStringMaxLength)
          str = str.substring(0, options.shortStringMaxLength-3) + "...";
        if (options.escapeHtml) {
          // Do the escape separately for every line as escapeHtml() on some
          // browsers (IE) will strip line breaks and we want to preserve them
          var lines = str.split("\n");
          for (var i = 0; i < lines.length; i++) lines[i] = dwr.util.escapeHtml(lines[i]);
          str = lines.join("\n");
        }
        if (showLevels == 0) { // Short format
          str = str.replace(/\n|\r|\t/g, function(ch) {
            switch (ch) {
              case "\n": return "\\n";
              case "\r": return "";
              case "\t": return "\\t";
            }
          });
        }
        else { // Long format
          str = str.replace(/\n|\r|\t/g, function(ch) {
            switch (ch) {
              case "\n": return options.lineTerminator + indent(indentDepth+1, options);
              case "\r": return "";
              case "\t": return "\\t";
            }
          });
        }
        reply = '"' + str + '"';
      }

      // function
      else if (typeof data == "function") {
        reply = "function";
      }

      // Array
      else if (dwr.util._isArray(data)) {
        if (showLevels == 0) { // Short format (don't show items)
          if (data.length > 0)
            reply = "[...]";
          else
            reply = "[]";
        }
        else { // Long format (show items)
          var strarr = [];
          strarr.push("[");
          var count = 0;
          for (var i = 0; i < data.length; i++) {
            if (! (i in data)) continue;
            var itemvalue = data[i];
            if (count > 0) strarr.push(", ");
            if (showLevels == 1) { // One-line format
              if (count == options.oneLineMaxItems) {
                strarr.push("...");
                break;
              }
            }
            else { // Multi-line format
              strarr.push(options.lineTerminator + indent(indentDepth+1, options));
            }
            if (i != count) {
              strarr.push(i);
              strarr.push(":");
            }
            strarr.push(recursive(itemvalue, showLevels-1, indentDepth+1, options));
            count++;
          }
          if (showLevels > 1) strarr.push(options.lineTerminator + indent(indentDepth, options));
          strarr.push("]");
          reply = strarr.join("");
        }
      }

      // Objects except Date
      else if (dwr.util._isObject(data) && !dwr.util._isDate(data)) {
        if (showLevels == 0) { // Short format (don't show properties)
          reply = dwr.util._detailedTypeOf(data);
        }
        else { // Long format (show properties)
          var strarr = [];
          if (dwr.util._detailedTypeOf(data) != "Object") {
            strarr.push(dwr.util._detailedTypeOf(data));
            if (typeof data.valueOf() != "object") {
              strarr.push(":");
              strarr.push(recursive(data.valueOf(), 1, indentDepth, options));
            }
            strarr.push(" ");
          }
          strarr.push("{");
          var isDomObject = dwr.util._isHTMLElement(data);
          var count = 0;
          for (var prop in data) {
            var propvalue = data[prop];
            if (isDomObject) {
              if (!propvalue) continue;
              if (typeof propvalue == "function") continue;
              if (skipDomProperties[prop]) continue;
              if (prop.toUpperCase() == prop) continue;
            }
            if (count > 0) strarr.push(", ");
            if (showLevels == 1) { // One-line format
              if (count == options.oneLineMaxItems) {
                strarr.push("...");
                break;
              }
            }
            else { // Multi-line format
              strarr.push(options.lineTerminator + indent(indentDepth+1, options));
            }
            strarr.push(prop.length > options.propertyNameMaxLength ? prop.substring(0, options.propertyNameMaxLength-3) + "..." : prop);
            strarr.push(":");
            strarr.push(recursive(propvalue, showLevels-1, indentDepth+1, options));
            count++;
          }
          if (showLevels > 1 && count > 0) strarr.push(options.lineTerminator + indent(indentDepth, options));
          strarr.push("}");
          reply = strarr.join("");
        }
      }

      // undefined, null, number, boolean, Date
      else {
        reply = "" + data;
      }

      return reply;
    }
    catch(err) {
      return (err.message ? err.message : ""+err);
    }
  }

  function indent(count, options) {
    var strarr = [];
    strarr.push(options.baseIndent);
    for (var i=0; i<count; i++) {
      strarr.push(options.childIndent);
    }
    return strarr.join("");
  };

  return recursive(data, showLevels, 0, opt);
};

/**
 * Setup a GMail style loading message.
 * @see http://getahead.org/dwr/browser/util/useloadingmessage
 */
dwr.util.useLoadingMessage = function(message) {
  var loadingMessage;
  if (message) loadingMessage = message;
  else loadingMessage = "Loading";
  dwr.engine.setPreHook(function() {
    var disabledZone = dwr.util.byId('disabledZone');
    if (!disabledZone) {
      disabledZone = document.createElement('div');
      disabledZone.setAttribute('id', 'disabledZone');
      disabledZone.style.position = "absolute";
      disabledZone.style.zIndex = "1000";
      disabledZone.style.left = "0px";
      disabledZone.style.top = "0px";
      disabledZone.style.width = "100%";
      disabledZone.style.height = "100%";
      document.body.appendChild(disabledZone);
      var messageZone = document.createElement('div');
      messageZone.setAttribute('id', 'messageZone');
      messageZone.style.position = "absolute";
      messageZone.style.top = "0px";
      messageZone.style.right = "0px";
      messageZone.style.background = "red";
      messageZone.style.color = "white";
      messageZone.style.fontFamily = "Arial,Helvetica,sans-serif";
      messageZone.style.padding = "4px";
      disabledZone.appendChild(messageZone);
      var text = document.createTextNode(loadingMessage);
      messageZone.appendChild(text);
      dwr.util._disabledZoneUseCount = 1;
    }
    else {
      dwr.util.byId('messageZone').innerHTML = loadingMessage;
      disabledZone.style.visibility = 'visible';
      dwr.util._disabledZoneUseCount++;
    }
  });
  dwr.engine.setPostHook(function() {
    dwr.util._disabledZoneUseCount--;
    if (dwr.util._disabledZoneUseCount == 0) {
      dwr.util.byId('disabledZone').style.visibility = 'hidden';
    }
  });
};

/**
 * Set a global highlight handler
 */
dwr.util.setHighlightHandler = function(handler) {
  dwr.util._highlightHandler = handler;
};

/**
 * An example highlight handler
 */
dwr.util.yellowFadeHighlightHandler = function(ele) {
  dwr.util._yellowFadeProcess(ele, 0);
};
dwr.util._yellowFadeSteps = [ "d0", "b0", "a0", "90", "98", "a0", "a8", "b0", "b8", "c0", "c8", "d0", "d8", "e0", "e8", "f0", "f8" ];
dwr.util._yellowFadeProcess = function(ele, colorIndex) {
  ele = dwr.util.byId(ele);
  if (colorIndex < dwr.util._yellowFadeSteps.length) {
    ele.style.backgroundColor = "#ffff" + dwr.util._yellowFadeSteps[colorIndex];
    setTimeout("dwr.util._yellowFadeProcess('" + ele.id + "'," + (colorIndex + 1) + ")", 200);
  }
  else {
    ele.style.backgroundColor = "transparent";
  }
};

/**
 * An example highlight handler
 */
dwr.util.borderFadeHighlightHandler = function(ele) {
  ele.style.borderWidth = "2px";
  ele.style.borderStyle = "solid";
  dwr.util._borderFadeProcess(ele, 0);
};
dwr.util._borderFadeSteps = [ "d0", "b0", "a0", "90", "98", "a0", "a8", "b0", "b8", "c0", "c8", "d0", "d8", "e0", "e8", "f0", "f8" ];
dwr.util._borderFadeProcess = function(ele, colorIndex) {
  ele = dwr.util.byId(ele);
  if (colorIndex < dwr.util._borderFadeSteps.length) {
    ele.style.borderColor = "#ff" + dwr.util._borderFadeSteps[colorIndex] + dwr.util._borderFadeSteps[colorIndex];
    setTimeout("dwr.util._borderFadeProcess('" + ele.id + "'," + (colorIndex + 1) + ")", 200);
  }
  else {
    ele.style.backgroundColor = "transparent";
  }
};

/**
 * A focus highlight handler
 */
dwr.util.focusHighlightHandler = function(ele) {
  try {
    ele.focus();
  }
  catch (ex) { /* ignore */ }
};

/** @private the current global highlight style */
dwr.util._highlightHandler = null;

/**
 * Highlight that an element has changed
 */
dwr.util.highlight = function(ele, options) {
  if (options && options.highlightHandler) {
    options.highlightHandler(dwr.util.byId(ele));
  }
  else if (dwr.util._highlightHandler != null) {
    dwr.util._highlightHandler(dwr.util.byId(ele));
  }
};

/**
 * Set the value an HTML element to the specified value.
 * @see http://getahead.org/dwr/browser/util/setvalue
 */
dwr.util.setValue = function(ele, val, options) {
  if (val == null) val = "";
  if (options == null) options = {};

  var orig = ele;
  if (typeof ele == "string") {
    ele = dwr.util.byId(ele);
    // We can work with names and need to sometimes for radio buttons, and IE has
    // an annoying bug where getElementById() returns an element based on name if
    // it doesn't find it by id. Here we don't want to do that, so:
    if (ele && ele.id != orig) ele = null;
  }
  var nodes = null;
  if (ele == null) {
    // Now it is time to look by name
    nodes = document.getElementsByName(orig);
    if (nodes.length >= 1) ele = nodes.item(0);
  }

  if (ele == null) {
    dwr.util._debug("setValue() can't find an element with id/name: " + orig + ".");
    return;
  }

  // All paths now lead to some update so we highlight a change
  dwr.util.highlight(ele, options);

  if (dwr.util._isHTMLElement(ele, "select")) {
    if (ele.type == "select-multiple" && dwr.util._isArray(val)) dwr.util._selectListItems(ele, val);
    else dwr.util._selectListItem(ele, val);
    return;
  }

  if (dwr.util._isHTMLElement(ele, "input")) {
    if (ele.type == "radio" || ele.type == "checkbox") {
      if (nodes && nodes.length >= 1) {
        for (var i = 0; i < nodes.length; i++) {
          var node = nodes.item(i);
          if (node.type != ele.type) continue;
          if (dwr.util._isArray(val)) {
            node.checked = false;
            for (var j = 0; j < val.length; j++)
              if (val[j] == node.value) node.checked = true;
          }
          else {
            node.checked = (node.value == val);
          }
        }
      }
      else {
        ele.checked = (val == true);
      }
    }
    else ele.value = val;

    return;
  }

  if (dwr.util._isHTMLElement(ele, "textarea")) {
    ele.value = val;
    return;
  }

  // If the value to be set is a DOM object then we try importing the node
  // rather than serializing it out
  if (val.nodeType) {
    if (val.nodeType == 9 /*Node.DOCUMENT_NODE*/) val = val.documentElement;
    val = dwr.util._importNode(ele.ownerDocument, val, true);
    ele.appendChild(val);
    return;
  }

  // Fall back to innerHTML and friends
  if (dwr.util._shouldEscapeHtml(options) && typeof(val) == "string") {
    if (ele.textContent) ele.textContent = val;
    else if (ele.innerText) ele.innerText = val;
    else ele.innerHTML = dwr.util.escapeHtml(val);
  }
  else {
    ele.innerHTML = val;
  }
};

/**
 * @private Find multiple items in a select list and select them. Used by setValue()
 * @param ele The select list item
 * @param val The array of values to select
 */
dwr.util._selectListItems = function(ele, val) {
  // We deal with select list elements by selecting the matching option
  // Begin by searching through the values
  var found  = false;
  var i;
  var j;
  for (i = 0; i < ele.options.length; i++) {
    ele.options[i].selected = false;
    for (j = 0; j < val.length; j++) {
      if (ele.options[i].value == val[j]) {
        ele.options[i].selected = true;
      }
    }
  }
  // If that fails then try searching through the visible text
  if (found) return;

  for (i = 0; i < ele.options.length; i++) {
    for (j = 0; j < val.length; j++) {
      if (ele.options[i].text == val[j]) {
        ele.options[i].selected = true;
      }
    }
  }
};

/**
 * @private Find an item in a select list and select it. Used by setValue()
 * @param ele The select list item
 * @param val The value to select
 */
dwr.util._selectListItem = function(ele, val) {
  // We deal with select list elements by selecting the matching option
  // Begin by searching through the values
  var found = false;
  var i;
  for (i = 0; i < ele.options.length; i++) {
    if (ele.options[i].value == val) {
      ele.options[i].selected = true;
      found = true;
    }
    else {
      ele.options[i].selected = false;
    }
  }

  // If that fails then try searching through the visible text
  if (found) return;

  for (i = 0; i < ele.options.length; i++) {
    ele.options[i].selected = (ele.options[i].text == val);
  }
};

/**
 * Read the current value for a given HTML element.
 * @see http://getahead.org/dwr/browser/util/getvalue
 */
dwr.util.getValue = function(ele, options) {
  if (options == null) options = {};
  var orig = ele;
  if (typeof ele == "string") {
    ele = dwr.util.byId(ele);
    // We can work with names and need to sometimes for radio buttons, and IE has
    // an annoying bug where getElementById() returns an element based on name if
    // it doesn't find it by id. Here we don't want to do that, so:
    if (ele && ele.id != orig) ele = null;
  }
  var nodes = null;
  if (ele == null) {
    // Now it is time to look by name
    nodes = document.getElementsByName(orig);
    if (nodes.length >= 1) ele = nodes.item(0);
  }
  if (ele == null) {
    dwr.util._debug("getValue() can't find an element with id/name: " + orig + ".");
    return "";
  }

  if (dwr.util._isHTMLElement(ele, "select")) {
    // Using "type" property instead of "multiple" as "type" is an official
    // client-side property since JS 1.1
    if (ele.type == "select-multiple") {
      var reply = new Array();
      for (var i = 0; i < ele.options.length; i++) {
        var item = ele.options[i];
        if (item.selected) {
          var valueAttr = item.getAttributeNode("value");
          if (valueAttr && valueAttr.specified) {
            reply.push(item.value);
          }
          else {
            reply.push(item.text);
          }
        }
      }
      return reply;
    }
    else {
      var sel = ele.selectedIndex;
      if (sel != -1) {
        var item = ele.options[sel];
        var valueAttr = item.getAttributeNode("value");
        if (valueAttr && valueAttr.specified) {
          return item.value;
        }
        return item.text;
      }
      else {
        return "";
      }
    }
  }

  if (dwr.util._isHTMLElement(ele, "input")) {
    if (ele.type == "radio") {
      if (nodes && nodes.length >= 1) {
        for (var i = 0; i < nodes.length; i++) {
          var node = nodes.item(i);
          if (node.type == ele.type) {
            if (node.checked) return node.value;
          }
        }
      }
      return ele.checked;
    }
    if (ele.type == "checkbox") {
      if (nodes && nodes.length >= 1) {
        var reply = [];
        for (var i = 0; i < nodes.length; i++) {
          var node = nodes.item(i);
          if (node.type == ele.type) {
            if (node.checked) reply.push(node.value);
          }
        }
        return reply;
      }
      return ele.checked;
    }
    return ele.value;
  }

  if (dwr.util._isHTMLElement(ele, "textarea")) {
    return ele.value;
  }

  if (dwr.util._shouldEscapeHtml(options)) {
    if (ele.textContent) return ele.textContent;
    else if (ele.innerText) return ele.innerText;
  }
  return ele.innerHTML;
};

/**
 * getText() is like getValue() except that it reads the text (and not the value) from select elements
 * @see http://getahead.org/dwr/browser/util/gettext
 */
dwr.util.getText = function(ele) {
  ele = dwr.util._getElementById(ele, "getText()");
  if (ele == null) return null;
  if (!dwr.util._isHTMLElement(ele, "select")) {
    dwr.util._debug("getText() can only be used with select elements. Attempt to use: " + dwr.util._detailedTypeOf(ele) + " from  id: " + orig + ".");
    return "";
  }

  // This is a bit of a scam because it assumes single select
  // but I'm not sure how we should treat multi-select.
  var sel = ele.selectedIndex;
  if (sel != -1) {
    return ele.options[sel].text;
  }
  else {
    return "";
  }
};

/**
 * Given a map, or a recursive structure consisting of arrays and maps, call
 * setValue() for all leaf entries and use intermediate levels to form nested
 * element ids.
 * @see http://getahead.org/dwr/browser/util/setvalues
 */
dwr.util.setValues = function(data, options) {
  var prefix = "";
  if (options && options.prefix) prefix = options.prefix;
  if (options && options.idPrefix) prefix = options.idPrefix;
  dwr.util._setValuesRecursive(data, prefix);
};

/**
 * @private Recursive helper for setValues()
 */
dwr.util._setValuesRecursive = function(data, idpath) {
  // Array containing objects -> add "[n]" to prefix and make recursive call
  // for each item object
  if (dwr.util._isArray(data) && data.length > 0 && dwr.util._isObject(data[0])) {
    for (var i = 0; i < data.length; i++) {
      dwr.util._setValuesRecursive(data[i], idpath+"["+i+"]");
    }
  }
  // Object (not array) -> handle nested object properties
  else if (dwr.util._isObject(data) && !dwr.util._isArray(data)) {
    for (var prop in data) {
      var subidpath = idpath ? idpath+"."+prop : prop;
      // Object (not array), or array containing objects -> call ourselves recursively
      if (dwr.util._isObject(data[prop]) && !dwr.util._isArray(data[prop])
          || dwr.util._isArray(data[prop]) && data[prop].length > 0 && dwr.util._isObject(data[prop][0])) {
        dwr.util._setValuesRecursive(data[prop], subidpath);
      }
      // Functions -> skip
      else if (typeof data[prop] == "function") {
        // NOP
      }
      // Only simple values left (or array of simple values, or empty array)
      // -> call setValue()
      else {
        // Are there any elements with that id or name
        if (dwr.util.byId(subidpath) != null || document.getElementsByName(subidpath).length >= 1) {
          dwr.util.setValue(subidpath, data[prop]);
        }
      }
    }
  }
};

/**
 * Given a map, or a recursive structure consisting of arrays and maps, call
 * getValue() for all leaf entries and use intermediate levels to form nested
 * element ids.
 * Given a string or element that refers to a form, create an object from the
 * elements of the form.
 * @see http://getahead.org/dwr/browser/util/getvalues
 */
dwr.util.getValues = function(data, options) {
  if (typeof data == "string" || dwr.util._isHTMLElement(data)) {
    return dwr.util.getFormValues(data);
  }
  else {
    var prefix = "";
    if (options != null && options.prefix) prefix = options.prefix;
    if (options != null && options.idPrefix) prefix = options.idPrefix;
    dwr.util._getValuesRecursive(data, prefix);
    return data;
  }
};

/**
 * Given a string or element that refers to a form, create an object from the
 * elements of the form.
 * @see http://getahead.org/dwr/browser/util/getvalues
 */
dwr.util.getFormValues = function(eleOrNameOrId) {
  var ele = null;
  if (typeof eleOrNameOrId == "string") {
    ele = document.forms[eleOrNameOrId];
    if (ele == null) ele = dwr.util.byId(eleOrNameOrId);
  }
  else if (dwr.util._isHTMLElement(eleOrNameOrId)) {
    ele = eleOrNameOrId;
  }
  if (ele != null) {
    if (ele.elements == null) {
      alert("getFormValues() requires an object or reference to a form element.");
      return null;
    }
    var reply = {};
    var name;
    var value;
    for (var i = 0; i < ele.elements.length; i++) {
      if (ele[i].type in {button:0,submit:0,reset:0,image:0,file:0}) continue;
      if (ele[i].name) {
        name = ele[i].name;
        value = dwr.util.getValue(name);
      }
      else {
        if (ele[i].id) name = ele[i].id;
        else name = "element" + i;
        value = dwr.util.getValue(ele[i]);
      }
      reply[name] = value;
    }
    return reply;
  }
};

/**
 * @private Recursive helper for getValues().
 */
dwr.util._getValuesRecursive = function(data, idpath) {
  // Array containing objects -> add "[n]" to idpath and make recursive call
  // for each item object
  if (dwr.util._isArray(data) && data.length > 0 && dwr.util._isObject(data[0])) {
    for (var i = 0; i < data.length; i++) {
      dwr.util._getValuesRecursive(data[i], idpath+"["+i+"]");
    }
  }
  // Object (not array) -> handle nested object properties
  else if (dwr.util._isObject(data) && !dwr.util._isArray(data)) {
    for (var prop in data) {
      var subidpath = idpath ? idpath+"."+prop : prop;
      // Object, or array containing objects -> call ourselves recursively
      if (dwr.util._isObject(data[prop]) && !dwr.util._isArray(data[prop])
          || dwr.util._isArray(data[prop]) && data[prop].length > 0 && dwr.util._isObject(data[prop][0])) {
        dwr.util._getValuesRecursive(data[prop], subidpath);
      }
      // Functions -> skip
      else if (typeof data[prop] == "function") {
        // NOP
      }
      // Only simple values left (or array of simple values, or empty array)
      // -> call getValue()
      else {
        // Are there any elements with that id or name
        if (dwr.util.byId(subidpath) != null || document.getElementsByName(subidpath).length >= 1) {
          data[prop] = dwr.util.getValue(subidpath);
        }
      }
    }
  }
};

/**
 * Add options to a list from an array or map.
 * @see http://getahead.org/dwr/browser/lists
 */
dwr.util.addOptions = function(ele, data/*, options*/) {
  ele = dwr.util._getElementById(ele, "addOptions()");
  if (ele == null) return;
  var useOptions = dwr.util._isHTMLElement(ele, "select");
  var useLi = dwr.util._isHTMLElement(ele, ["ul", "ol"]);
  if (!useOptions && !useLi) {
    dwr.util._debug("addOptions() can only be used with select/ul/ol elements. Attempt to use: " + dwr.util._detailedTypeOf(ele));
    return;
  }
  if (data == null) return;

  var argcount = arguments.length;
  var options = {};
  var lastarg = arguments[argcount - 1];
  if (argcount > 2 && dwr.util._isObject(lastarg)) {
    options = lastarg;
    argcount--;
  }
  var arg3 = null; if (argcount >= 3) arg3 = arguments[2];
  var arg4 = null; if (argcount >= 4) arg4 = arguments[3];
  if (!options.optionCreator && useOptions) options.optionCreator = dwr.util._defaultOptionCreator;
  if (!options.optionCreator && useLi) options.optionCreator = dwr.util._defaultListItemCreator;

  var text, value, li;
  if (dwr.util._isArray(data)) {
    // Loop through the data that we do have
    for (var i = 0; i < data.length; i++) {
      options.data = data[i];
      options.text = null;
      options.value = null;
      if (useOptions) {
        if (arg3 != null) {
          if (arg4 != null) {
            options.text = dwr.util._getValueFrom(data[i], arg4);
            options.value = dwr.util._getValueFrom(data[i], arg3);
          }
          else options.text = options.value = dwr.util._getValueFrom(data[i], arg3);
        }
        else options.text = options.value = dwr.util._getValueFrom(data[i]);

        if (options.text != null || options.value) {
          var opt = options.optionCreator(options);
          opt.text = options.text;
          opt.value = options.value;
          ele.options[ele.options.length] = opt;
        }
      }
      else {
        options.value = dwr.util._getValueFrom(data[i], arg3);
        if (options.value != null) {
          li = options.optionCreator(options);
          if (dwr.util._shouldEscapeHtml(options)) {
            options.value = dwr.util.escapeHtml(options.value);
          }
          li.innerHTML = options.value;
          ele.appendChild(li);
        }
      }
    }
  }
  else if (arg4 != null) {
    if (!useOptions) {
      alert("dwr.util.addOptions can only create select lists from objects.");
      return;
    }
    for (var prop in data) {
      options.data = data[prop];
      options.value = dwr.util._getValueFrom(data[prop], arg3);
      options.text = dwr.util._getValueFrom(data[prop], arg4);

      if (options.text != null || options.value) {
        var opt = options.optionCreator(options);
        opt.text = options.text;
        opt.value = options.value;
        ele.options[ele.options.length] = opt;
      }
    }
  }
  else {
    if (!useOptions) {
      dwr.util._debug("dwr.util.addOptions can only create select lists from objects.");
      return;
    }
    for (var prop in data) {
      if (typeof data[prop] == "function") continue;
      options.data = data[prop];
      if (!arg3) {
        options.value = prop;
        options.text = data[prop];
      }
      else {
        options.value = data[prop];
        options.text = prop;
      }
      if (options.text != null || options.value) {
        var opt = options.optionCreator(options);
        opt.text = options.text;
        opt.value = options.value;
        ele.options[ele.options.length] = opt;
      }
    }
  }

  // All error routes through this function result in a return, so highlight now
  dwr.util.highlight(ele, options);
};

/**
 * @private Get the data from an array function for dwr.util.addOptions
 */
dwr.util._getValueFrom = function(data, method) {
  if (method == null) return data;
  else if (typeof method == 'function') return method(data);
  else return data[method];
};

/**
 * @private Default option creation function
 */
dwr.util._defaultOptionCreator = function(options) {
  return new Option();
};

/**
 * @private Default list item creation function
 */
dwr.util._defaultListItemCreator = function(options) {
  return document.createElement("li");
};

/**
 * Remove all the options from a select list (specified by id)
 * @see http://getahead.org/dwr/browser/lists
 */
dwr.util.removeAllOptions = function(ele) {
  ele = dwr.util._getElementById(ele, "removeAllOptions()");
  if (ele == null) return;
  var useOptions = dwr.util._isHTMLElement(ele, "select");
  var useLi = dwr.util._isHTMLElement(ele, ["ul", "ol"]);
  if (!useOptions && !useLi) {
    dwr.util._debug("removeAllOptions() can only be used with select, ol and ul elements. Attempt to use: " + dwr.util._detailedTypeOf(ele));
    return;
  }
  if (useOptions) {
    ele.options.length = 0;
  }
  else {
    while (ele.childNodes.length > 0) {
      ele.removeChild(ele.firstChild);
    }
  }
};

/**
 * Create rows inside a the table, tbody, thead or tfoot element (given by id).
 * @see http://getahead.org/dwr/browser/tables
 */
dwr.util.addRows = function(ele, data, cellFuncs, options) {
  ele = dwr.util._getElementById(ele, "addRows()");
  if (ele == null) return;
  if (!dwr.util._isHTMLElement(ele, ["table", "tbody", "thead", "tfoot"])) {
    dwr.util._debug("addRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: " + dwr.util._detailedTypeOf(ele));
    return;
  }
  if (!options) options = {};
  if (!options.rowCreator) options.rowCreator = dwr.util._defaultRowCreator;
  if (!options.cellCreator) options.cellCreator = dwr.util._defaultCellCreator;
  var tr, rowNum;
  if (dwr.util._isArray(data)) {
    for (rowNum = 0; rowNum < data.length; rowNum++) {
      options.rowData = data[rowNum];
      options.rowIndex = rowNum;
      options.rowNum = rowNum;
      options.data = null;
      options.cellNum = -1;
      tr = dwr.util._addRowInner(cellFuncs, options);
      if (tr != null) ele.appendChild(tr);
    }
  }
  else if (typeof data == "object") {
    rowNum = 0;
    for (var rowIndex in data) {
      options.rowData = data[rowIndex];
      options.rowIndex = rowIndex;
      options.rowNum = rowNum;
      options.data = null;
      options.cellNum = -1;
      tr = dwr.util._addRowInner(cellFuncs, options);
      if (tr != null) ele.appendChild(tr);
      rowNum++;
    }
  }

  dwr.util.highlight(ele, options);
};

/**
 * @private Internal function to draw a single row of a table.
 */
dwr.util._addRowInner = function(cellFuncs, options) {
  var tr = options.rowCreator(options);
  if (tr == null) return null;
  for (var cellNum = 0; cellNum < cellFuncs.length; cellNum++) {
    var func = cellFuncs[cellNum];
    if (typeof func == 'function') options.data = func(options.rowData, options);
    else options.data = func || "";
    options.cellNum = cellNum;
    var td = options.cellCreator(options);
    if (td != null) {
      if (options.data != null) {
        if (dwr.util._isHTMLElement(options.data)) td.appendChild(options.data);
        else {
          if (dwr.util._shouldEscapeHtml(options) && typeof(options.data) == "string") {
            td.innerHTML = dwr.util.escapeHtml(options.data);
          }
          else {
            td.innerHTML = options.data;
          }
        }
      }
      tr.appendChild(td);
    }
  }
  return tr;
};

/**
 * @private Default row creation function
 */
dwr.util._defaultRowCreator = function(options) {
  return document.createElement("tr");
};

/**
 * @private Default cell creation function
 */
dwr.util._defaultCellCreator = function(options) {
  return document.createElement("td");
};

/**
 * Remove all the children of a given node.
 * @see http://getahead.org/dwr/browser/tables
 */
dwr.util.removeAllRows = function(ele, options) {
  ele = dwr.util._getElementById(ele, "removeAllRows()");
  if (ele == null) return;
  if (!options) options = {};
  if (!options.filter) options.filter = function() { return true; };
  if (!dwr.util._isHTMLElement(ele, ["table", "tbody", "thead", "tfoot"])) {
    dwr.util._debug("removeAllRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: " + dwr.util._detailedTypeOf(ele));
    return;
  }
  var child = ele.firstChild;
  var next;
  while (child != null) {
    next = child.nextSibling;
    if (options.filter(child)) {
      ele.removeChild(child);
    }
    child = next;
  }
};

/**
 * dwr.util.byId(ele).className = "X", that we can call from Java easily.
 */
dwr.util.setClassName = function(ele, className) {
  ele = dwr.util._getElementById(ele, "setClassName()");
  if (ele == null) return;
  ele.className = className;
};

/**
 * dwr.util.byId(ele).className += "X", that we can call from Java easily.
 */
dwr.util.addClassName = function(ele, className) {
  ele = dwr.util._getElementById(ele, "addClassName()");
  if (ele == null) return;
  ele.className += " " + className;
};

/**
 * dwr.util.byId(ele).className -= "X", that we can call from Java easily
 * From code originally by Gavin Kistner
 */
dwr.util.removeClassName = function(ele, className) {
  ele = dwr.util._getElementById(ele, "removeClassName()");
  if (ele == null) return;
  var regex = new RegExp("(^|\\s)" + className + "(\\s|$)", 'g');
  ele.className = ele.className.replace(regex, '');
};

/**
 * dwr.util.byId(ele).className |= "X", that we can call from Java easily.
 */
dwr.util.toggleClassName = function(ele, className) {
  ele = dwr.util._getElementById(ele, "toggleClassName()");
  if (ele == null) return;
  var regex = new RegExp("(^|\\s)" + className + "(\\s|$)");
  if (regex.test(ele.className)) {
    ele.className = ele.className.replace(regex, '');
  }
  else {
    ele.className += " " + className;
  }
};

/**
 * Clone a node and insert it into the document just above the 'template' node
 * @see http://getahead.org/dwr/???
 */
dwr.util.cloneNode = function(ele, options) {
  ele = dwr.util._getElementById(ele, "cloneNode()");
  if (ele == null) return null;
  if (options == null) options = {};
  var clone = ele.cloneNode(true);
  if (options.idPrefix || options.idSuffix) {
    dwr.util._updateIds(clone, options);
  }
  else {
    dwr.util._removeIds(clone);
  }
  ele.parentNode.insertBefore(clone, ele);
  return clone;
};

/**
 * @private Update all of the ids in an element tree
 */
dwr.util._updateIds = function(ele, options) {
  if (options == null) options = {};
  if (ele.id) {
    ele.setAttribute("id", (options.idPrefix || "") + ele.id + (options.idSuffix || ""));
  }
  var children = ele.childNodes;
  for (var i = 0; i < children.length; i++) {
    var child = children.item(i);
    if (child.nodeType == 1 /*Node.ELEMENT_NODE*/) {
      dwr.util._updateIds(child, options);
    }
  }
};

/**
 * @private Remove all the Ids from an element
 */
dwr.util._removeIds = function(ele) {
  if (ele.id) ele.removeAttribute("id");
  var children = ele.childNodes;
  for (var i = 0; i < children.length; i++) {
    var child = children.item(i);
    if (child.nodeType == 1 /*Node.ELEMENT_NODE*/) {
      dwr.util._removeIds(child);
    }
  }
};

/**
 * Clone a template node and its embedded template child nodes according to
 * cardinalities (of arrays) in supplied data.
 */
dwr.util.cloneNodeForValues = function(templateEle, data, options) {
  templateEle = dwr.util._getElementById(templateEle, "cloneNodeForValues()");
  if (templateEle == null) return null;
  if (options == null) options = {};
  var idpath;
  if (options.idPrefix != null)
    idpath = options.idPrefix;
  else
    idpath = templateEle.id || "";
  return dwr.util._cloneNodeForValuesRecursive(templateEle, data, idpath, options);
};

/**
 * @private Recursive helper for cloneNodeForValues().
 */
dwr.util._cloneNodeForValuesRecursive = function(templateEle, data, idpath, options) {
  // Incoming array -> make an id for each item and call clone of the template
  // for each of them
  if (dwr.util._isArray(data)) {
    var clones = [];
    for (var i = 0; i < data.length; i++) {
      var item = data[i];
      var clone = dwr.util._cloneNodeForValuesRecursive(templateEle, item, idpath + "[" + i + "]", options);
      clones.push(clone);
    }
    return clones;
  }
  else
  // Incoming object (not array) -> clone the template, add id prefixes, add
  // clone to DOM, and then recurse into any array properties if they contain
  // objects and there is a suitable template
  if (dwr.util._isObject(data) && !dwr.util._isArray(data)) {
    var clone = templateEle.cloneNode(true);
    if (options.updateCloneStyle && clone.style) {
      for (var propname in options.updateCloneStyle) {
        clone.style[propname] = options.updateCloneStyle[propname];
      }
    }
    dwr.util._replaceIds(clone, templateEle.id, idpath);
    templateEle.parentNode.insertBefore(clone, templateEle);
    dwr.util._cloneSubArrays(data, idpath, options);
    return clone;
  }

  // It is an error to end up here so we return nothing
  return null;
};

/**
 * @private Substitute a leading idpath fragment with another idpath for all
 * element ids tree, and remove ids that don't match the idpath.
 */
dwr.util._replaceIds = function(ele, oldidpath, newidpath) {
  if (ele.id) {
    var newId = null;
    if (ele.id == oldidpath) {
      newId = newidpath;
    }
    else if (ele.id.length > oldidpath.length) {
      if (ele.id.substr(0, oldidpath.length) == oldidpath) {
        var trailingChar = ele.id.charAt(oldidpath.length);
        if (trailingChar == "." || trailingChar == "[") {
          newId = newidpath + ele.id.substr(oldidpath.length);
        }
      }
    }
    if (newId) {
      ele.setAttribute("id", newId);
    }
    else {
      ele.removeAttribute("id");
    }
  }
  var children = ele.childNodes;
  for (var i = 0; i < children.length; i++) {
    var child = children.item(i);
    if (child.nodeType == 1 /*Node.ELEMENT_NODE*/) {
      dwr.util._replaceIds(child, oldidpath, newidpath);
    }
  }
};

/**
 * @private Finds arrays in supplied data and uses any corresponding template
 * node to make a clone for each item in the array.
 */
dwr.util._cloneSubArrays = function(data, idpath, options) {
  for (prop in data) {
    var value = data[prop];
    // Look for potential recursive cloning in all array properties
    if (dwr.util._isArray(value)) {
      // Only arrays with objects are interesting for cloning
      if (value.length > 0 && dwr.util._isObject(value[0])) {
        var subTemplateId = idpath + "." + prop;
        var subTemplateEle = dwr.util.byId(subTemplateId);
        if (subTemplateEle != null) {
          dwr.util._cloneNodeForValuesRecursive(subTemplateEle, value, subTemplateId, options);
        }
      }
    }
    // Continue looking for arrays in object properties
    else if (dwr.util._isObject(value)) {
      dwr.util._cloneSubArrays(value, idpath + "." + prop, options);
    }
  }
};

/**
 * @private Helper to turn a string into an element with an error message
 */
dwr.util._getElementById = function(ele, source) {
  var orig = ele;
  ele = dwr.util.byId(ele);
  if (ele == null) {
    dwr.util._debug(source + " can't find an element with id: " + orig + ".");
  }
  return ele;
};

/**
 * @private Is the given node an HTML element (optionally of a given type)?
 * @param ele The element to test
 * @param nodeName eg "input", "textarea" - check for node name (optional)
 *         if nodeName is an array then check all for a match.
 */
dwr.util._isHTMLElement = function(ele, nodeName) {
  if (ele == null || typeof ele != "object" || ele.nodeName == null) {
    return false;
  }
  if (nodeName != null) {
    var test = ele.nodeName.toLowerCase();
    if (typeof nodeName == "string") {
      return test == nodeName.toLowerCase();
    }
    if (dwr.util._isArray(nodeName)) {
      var match = false;
      for (var i = 0; i < nodeName.length && !match; i++) {
        if (test == nodeName[i].toLowerCase()) {
          match =  true;
        }
      }
      return match;
    }
    dwr.util._debug("dwr.util._isHTMLElement was passed test node name that is neither a string or array of strings");
    return false;
  }
  return true;
};

/**
 * @private Like typeOf except that more information for an object is returned other than "object"
 */
dwr.util._detailedTypeOf = function(x) {
  var reply = typeof x;
  if (reply == "object") {
    reply = Object.prototype.toString.apply(x); // Returns "[object class]"
    reply = reply.substring(8, reply.length-1);  // Just get the class bit
  }
  return reply;
};

/**
 * @private Object detector. Excluding null from objects.
 */
dwr.util._isObject = function(data) {
  return (data && typeof data == "object");
};

/**
 * @private Array detector. Note: instanceof doesn't work with multiple frames.
 */
dwr.util._isArray = function(data) {
  return (data && data.join);
};

/**
 * @private Date detector. Note: instanceof doesn't work with multiple frames.
 */
dwr.util._isDate = function(data) {
  return (data && data.toUTCString) ? true : false;
};

/**
 * @private Used by setValue. Gets around the missing functionallity in IE.
 */
dwr.util._importNode = function(doc, importedNode, deep) {
  var newNode;

  if (importedNode.nodeType == 1 /*Node.ELEMENT_NODE*/) {
    newNode = doc.createElement(importedNode.nodeName);

    for (var i = 0; i < importedNode.attributes.length; i++) {
      var attr = importedNode.attributes[i];
      if (attr.nodeValue != null && attr.nodeValue != '') {
        newNode.setAttribute(attr.name, attr.nodeValue);
      }
    }

    if (typeof importedNode.style != "undefined") {
      newNode.style.cssText = importedNode.style.cssText;
    }
  }
  else if (importedNode.nodeType == 3 /*Node.TEXT_NODE*/) {
    newNode = doc.createTextNode(importedNode.nodeValue);
  }

  if (deep && importedNode.hasChildNodes()) {
    for (i = 0; i < importedNode.childNodes.length; i++) {
      newNode.appendChild(dwr.util._importNode(doc, importedNode.childNodes[i], true));
    }
  }

  return newNode;
};

/** @private Used internally when some message needs to get to the programmer */
dwr.util._debug = function(message, stacktrace) {
  var written = false;
  try {
    if (window.console) {
      if (stacktrace && window.console.trace) window.console.trace();
      window.console.log(message);
      written = true;
    }
    else if (window.opera && window.opera.postError) {
      window.opera.postError(message);
      written = true;
    }
  }
  catch (ex) { /* ignore */ }

  if (!written) {
    var debug = document.getElementById("dwr-debug");
    if (debug) {
      var contents = message + "<br/>" + debug.innerHTML;
      if (contents.length > 2048) contents = contents.substring(0, 2048);
      debug.innerHTML = contents;
    }
  }
};

         20181009141245Ð     D   }      >                  ‹          Þ³      / * 
   *   C o p y r i g h t   2 0 0 5   J o e   W a l k e r 
   * 
   *   L i c e n s e d   u n d e r   t h e   A p a c h e   L i c e n s e ,   V e r s i o n   2 . 0   ( t h e   " L i c e n s e " ) ; 
   *   y o u   m a y   n o t   u s e   t h i s   f i l e   e x c e p t   i n   c o m p l i a n c e   w i t h   t h e   L i c e n s e . 
   *   Y o u   m a y   o b t a i n   a   c o p y   o f   t h e   L i c e n s e   a t 
   * 
   *           h t t p : / / w w w . a p a c h e . o r g / l i c e n s e s / L I C E N S E - 2 . 0 
   * 
   *   U n l e s s   r e q u i r e d   b y   a p p l i c a b l e   l a w   o r   a g r e e d   t o   i n   w r i t i n g ,   s o f t w a r e 
   *   d i s t r i b u t e d   u n d e r   t h e   L i c e n s e   i s   d i s t r i b u t e d   o n   a n   " A S   I S "   B A S I S , 
   *   W I T H O U T   W A R R A N T I E S   O R   C O N D I T I O N S   O F   A N Y   K I N D ,   e i t h e r   e x p r e s s   o r   i m p l i e d . 
   *   S e e   t h e   L i c e n s e   f o r   t h e   s p e c i f i c   l a n g u a g e   g o v e r n i n g   p e r m i s s i o n s   a n d 
   *   l i m i t a t i o n s   u n d e r   t h e   L i c e n s e . 
   * / 
 
 / * * 
   *   D e c l a r e   a n   o b j e c t   t o   w h i c h   w e   c a n   a d d   r e a l   f u n c t i o n s . 
   * / 
 i f   ( d w r   = =   n u l l )   v a r   d w r   =   { } ; 
 i f   ( d w r . u t i l   = =   n u l l )   d w r . u t i l   =   { } ; 
 i f   ( D W R U t i l   = =   n u l l )   v a r   D W R U t i l   =   d w r . u t i l ; 
 
 / * *   @ p r i v a t e   T h e   f l a g   w e   u s e   t o   d e c i d e   i f   w e   s h o u l d   e s c a p e   h t m l   * / 
 d w r . u t i l . _ e s c a p e H t m l   =   t r u e ; 
 
 / * * 
   *   S e t   t h e   g l o b a l   e s c a p e H t m l   f l a g 
   * / 
 d w r . u t i l . s e t E s c a p e H t m l   =   f u n c t i o n ( e s c a p e H t m l )   { 
     d w r . u t i l . _ e s c a p e H t m l   =   e s c a p e H t m l ; 
 } ; 
 
 / * *   @ p r i v a t e   W o r k   o u t   f r o m   a n   o p t i o n s   l i s t   a n d   g l o b a l   s e t t i n g s   i f   w e   s h o u l d   b e   e s c c a p i n g   * / 
 d w r . u t i l . _ s h o u l d E s c a p e H t m l   =   f u n c t i o n ( o p t i o n s )   { 
     i f   ( o p t i o n s   & &   o p t i o n s . e s c a p e H t m l   ! =   n u l l )   { 
         r e t u r n   o p t i o n s . e s c a p e H t m l ; 
     } 
     r e t u r n   d w r . u t i l . _ e s c a p e H t m l ; 
 } ; 
 
 / * * 
   *   R e t u r n   a   s t r i n g   w i t h   & ,   <   a n d   >   r e p l a c e d   w i t h   t h e i r   e n t i t i e s 
   *   @ s e e   T O D O 
   * / 
 d w r . u t i l . e s c a p e H t m l   =   f u n c t i o n ( o r i g i n a l )   { 
     r e t u r n   o r i g i n a l . r e p l a c e ( / & / g , ' & a m p ; ' ) . r e p l a c e ( / < / g , ' & l t ; ' ) . r e p l a c e ( / > / g , ' & g t ; ' ) ; 
 } ; 
 
 / * * 
   *   R e p l a c e   c o m m o n   X M L   e n t i t i e s   w i t h   c h a r a c t e r s   ( s e e   d w r . u t i l . e s c a p e H t m l ( ) ) 
   *   @ s e e   T O D O 
   * / 
 d w r . u t i l . u n e s c a p e H t m l   =   f u n c t i o n ( o r i g i n a l )   { 
     r e t u r n   o r i g i n a l . r e p l a c e ( / & a m p ; / g , ' & ' ) . r e p l a c e ( / & l t ; / g , ' < ' ) . r e p l a c e ( / & g t ; / g , ' > ' ) ; 
 } ; 
 
 / * * 
   *   R e p l a c e   c h a r a c t e r s   d a n g e r o u s   f o r   X S S   r e a s o n s   w i t h   v i s u a l l y   s i m i l a r   c h a r a c t e r s 
   *   @ s e e   T O D O 
   * / 
 d w r . u t i l . r e p l a c e X m l C h a r a c t e r s   =   f u n c t i o n ( o r i g i n a l )   { 
     o r i g i n a l   =   o r i g i n a l . r e p l a c e ( " & " ,   " + " ) ; 
     o r i g i n a l   =   o r i g i n a l . r e p l a c e ( " < " ,   " \ u 2 0 3 9 " ) ; 
     o r i g i n a l   =   o r i g i n a l . r e p l a c e ( " > " ,   " \ u 2 0 3 A " ) ; 
     o r i g i n a l   =   o r i g i n a l . r e p l a c e ( " \ ' " ,   " \ u 2 0 1 8 " ) ; 
     o r i g i n a l   =   o r i g i n a l . r e p l a c e ( " \ " " ,   " \ u 2 0 1 C " ) ; 
     r e t u r n   o r i g i n a l ; 
 } ; 
 
 / * * 
   *   R e t u r n   t r u e   i f f   t h e   i n p u t   s t r i n g   c o n t a i n s   a n y   X S S   d a n g e r o u s   c h a r a c t e r s 
   *   @ s e e   T O D O 
   * / 
 d w r . u t i l . c o n t a i n s X s s R i s k y C h a r a c t e r s   =   f u n c t i o n ( o r i g i n a l )   { 
     r e t u r n   ( o r i g i n a l . i n d e x O f ( ' & ' )   ! =   - 1 
         | |   o r i g i n a l . i n d e x O f ( ' < ' )   ! =   - 1 
         | |   o r i g i n a l . i n d e x O f ( ' > ' )   ! =   - 1 
         | |   o r i g i n a l . i n d e x O f ( ' \ ' ' )   ! =   - 1 
         | |   o r i g i n a l . i n d e x O f ( ' \ " ' )   ! =   - 1 ) ; 
 } ; 
 
 / * * 
   *   E n a b l e s   y o u   t o   r e a c t   t o   r e t u r n   b e i n g   p r e s s e d   i n   a n   i n p u t 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / s e l e c t r a n g e 
   * / 
 d w r . u t i l . o n R e t u r n   =   f u n c t i o n ( e v e n t ,   a c t i o n )   { 
     i f   ( ! e v e n t )   e v e n t   =   w i n d o w . e v e n t ; 
     i f   ( e v e n t   & &   e v e n t . k e y C o d e   & &   e v e n t . k e y C o d e   = =   1 3 )   a c t i o n ( ) ; 
 } ; 
 
 / * * 
   *   S e l e c t   a   s p e c i f i c   r a n g e   i n   a   t e x t   b o x .   U s e f u l   f o r   ' g o o g l e   s u g g e s t '   t y p e   f u n c t i o n s . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / s e l e c t r a n g e 
   * / 
 d w r . u t i l . s e l e c t R a n g e   =   f u n c t i o n ( e l e ,   s t a r t ,   e n d )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " s e l e c t R a n g e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     i f   ( e l e . s e t S e l e c t i o n R a n g e )   { 
         e l e . s e t S e l e c t i o n R a n g e ( s t a r t ,   e n d ) ; 
     } 
     e l s e   i f   ( e l e . c r e a t e T e x t R a n g e )   { 
         v a r   r a n g e   =   e l e . c r e a t e T e x t R a n g e ( ) ; 
         r a n g e . m o v e S t a r t ( " c h a r a c t e r " ,   s t a r t ) ; 
         r a n g e . m o v e E n d ( " c h a r a c t e r " ,   e n d   -   e l e . v a l u e . l e n g t h ) ; 
         r a n g e . s e l e c t ( ) ; 
     } 
     e l e . f o c u s ( ) ; 
 } ; 
 
 / * * 
   *   F i n d   t h e   e l e m e n t   i n   t h e   c u r r e n t   H T M L   d o c u m e n t   w i t h   t h e   g i v e n   i d   o r   i d s 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / $ 
   * / 
 i f   ( d o c u m e n t . g e t E l e m e n t B y I d )   { 
     d w r . u t i l . b y I d   =   f u n c t i o n ( )   { 
         v a r   e l e m e n t s   =   n e w   A r r a y ( ) ; 
         f o r   ( v a r   i   =   0 ;   i   <   a r g u m e n t s . l e n g t h ;   i + + )   { 
             v a r   e l e m e n t   =   a r g u m e n t s [ i ] ; 
             i f   ( t y p e o f   e l e m e n t   = =   ' s t r i n g ' )   { 
                 e l e m e n t   =   d o c u m e n t . g e t E l e m e n t B y I d ( e l e m e n t ) ; 
             } 
             i f   ( a r g u m e n t s . l e n g t h   = =   1 )   { 
                 r e t u r n   e l e m e n t ; 
             } 
             e l e m e n t s . p u s h ( e l e m e n t ) ; 
         } 
         r e t u r n   e l e m e n t s ; 
     } ; 
 } 
 e l s e   i f   ( d o c u m e n t . a l l )   { 
     d w r . u t i l . b y I d   =   f u n c t i o n ( )   { 
         v a r   e l e m e n t s   =   n e w   A r r a y ( ) ; 
         f o r   ( v a r   i   =   0 ;   i   <   a r g u m e n t s . l e n g t h ;   i + + )   { 
             v a r   e l e m e n t   =   a r g u m e n t s [ i ] ; 
             i f   ( t y p e o f   e l e m e n t   = =   ' s t r i n g ' )   { 
                 e l e m e n t   =   d o c u m e n t . a l l [ e l e m e n t ] ; 
             } 
             i f   ( a r g u m e n t s . l e n g t h   = =   1 )   { 
                 r e t u r n   e l e m e n t ; 
             } 
             e l e m e n t s . p u s h ( e l e m e n t ) ; 
         } 
         r e t u r n   e l e m e n t s ; 
     } ; 
 } 
 
 / * * 
   *   A l i a s   $   t o   d w r . u t i l . b y I d 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / $ 
   * / 
 v a r   $ ; 
 i f   ( ! $ )   { 
     $   =   d w r . u t i l . b y I d ; 
 } 
 
 / * * 
   *   T h i s   f u n c t i o n   p r e t t y - p r i n t s   s i m p l e   d a t a   o r   w h o l e   o b j e c t   g r a p h s ,   f   e x   a s   a n   a i d   i n   d e b u g g i n g . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / t o d e s c r i p t i v e s t r i n g 
   * / 
 d w r . u t i l . t o D e s c r i p t i v e S t r i n g   =   f u n c t i o n ( d a t a ,   s h o w L e v e l s ,   o p t i o n s )   { 
     i f   ( s h o w L e v e l s   = = =   u n d e f i n e d )   s h o w L e v e l s   =   1 ; 
     v a r   o p t   =   { } ; 
     i f   ( d w r . u t i l . _ i s O b j e c t ( o p t i o n s ) )   o p t   =   o p t i o n s ; 
     v a r   d e f a u l t o p t i o n s   =   { 
         e s c a p e H t m l : f a l s e , 
         b a s e I n d e n t :   " " , 
         c h i l d I n d e n t :   " \ u 0 0 A 0 \ u 0 0 A 0 " , 
         l i n e T e r m i n a t o r :   " \ n " , 
         o n e L i n e M a x I t e m s :   5 , 
         s h o r t S t r i n g M a x L e n g t h :   1 3 , 
         p r o p e r t y N a m e M a x L e n g t h :   3 0 
     } ; 
     f o r   ( v a r   p   i n   d e f a u l t o p t i o n s )   { 
         i f   ( ! ( p   i n   o p t ) )   { 
             o p t [ p ]   =   d e f a u l t o p t i o n s [ p ] ; 
         } 
     } 
 
     v a r   s k i p D o m P r o p e r t i e s   =   { 
         d o c u m e n t : t r u e ,   o w n e r D o c u m e n t : t r u e , 
         a l l : t r u e , 
         p a r e n t E l e m e n t : t r u e ,   p a r e n t N o d e : t r u e ,   o f f s e t P a r e n t : t r u e , 
         c h i l d r e n : t r u e ,   f i r s t C h i l d : t r u e ,   l a s t C h i l d : t r u e , 
         p r e v i o u s S i b l i n g : t r u e ,   n e x t S i b l i n g : t r u e , 
         i n n e r H T M L : t r u e ,   o u t e r H T M L : t r u e , 
         i n n e r T e x t : t r u e ,   o u t e r T e x t : t r u e ,   t e x t C o n t e n t : t r u e , 
         a t t r i b u t e s : t r u e , 
         s t y l e : t r u e ,   c u r r e n t S t y l e : t r u e ,   r u n t i m e S t y l e : t r u e , 
         p a r e n t T e x t E d i t : t r u e 
     } ; 
 
     f u n c t i o n   r e c u r s i v e ( d a t a ,   s h o w L e v e l s ,   i n d e n t D e p t h ,   o p t i o n s )   { 
         v a r   r e p l y   =   " " ; 
         t r y   { 
             / /   s t r i n g 
             i f   ( t y p e o f   d a t a   = =   " s t r i n g " )   { 
                 v a r   s t r   =   d a t a ; 
                 i f   ( s h o w L e v e l s   = =   0   & &   s t r . l e n g t h   >   o p t i o n s . s h o r t S t r i n g M a x L e n g t h ) 
                     s t r   =   s t r . s u b s t r i n g ( 0 ,   o p t i o n s . s h o r t S t r i n g M a x L e n g t h - 3 )   +   " . . . " ; 
                 i f   ( o p t i o n s . e s c a p e H t m l )   { 
                     / /   D o   t h e   e s c a p e   s e p a r a t e l y   f o r   e v e r y   l i n e   a s   e s c a p e H t m l ( )   o n   s o m e 
                     / /   b r o w s e r s   ( I E )   w i l l   s t r i p   l i n e   b r e a k s   a n d   w e   w a n t   t o   p r e s e r v e   t h e m 
                     v a r   l i n e s   =   s t r . s p l i t ( " \ n " ) ; 
                     f o r   ( v a r   i   =   0 ;   i   <   l i n e s . l e n g t h ;   i + + )   l i n e s [ i ]   =   d w r . u t i l . e s c a p e H t m l ( l i n e s [ i ] ) ; 
                     s t r   =   l i n e s . j o i n ( " \ n " ) ; 
                 } 
                 i f   ( s h o w L e v e l s   = =   0 )   {   / /   S h o r t   f o r m a t 
                     s t r   =   s t r . r e p l a c e ( / \ n | \ r | \ t / g ,   f u n c t i o n ( c h )   { 
                         s w i t c h   ( c h )   { 
                             c a s e   " \ n " :   r e t u r n   " \ \ n " ; 
                             c a s e   " \ r " :   r e t u r n   " " ; 
                             c a s e   " \ t " :   r e t u r n   " \ \ t " ; 
                         } 
                     } ) ; 
                 } 
                 e l s e   {   / /   L o n g   f o r m a t 
                     s t r   =   s t r . r e p l a c e ( / \ n | \ r | \ t / g ,   f u n c t i o n ( c h )   { 
                         s w i t c h   ( c h )   { 
                             c a s e   " \ n " :   r e t u r n   o p t i o n s . l i n e T e r m i n a t o r   +   i n d e n t ( i n d e n t D e p t h + 1 ,   o p t i o n s ) ; 
                             c a s e   " \ r " :   r e t u r n   " " ; 
                             c a s e   " \ t " :   r e t u r n   " \ \ t " ; 
                         } 
                     } ) ; 
                 } 
                 r e p l y   =   ' " '   +   s t r   +   ' " ' ; 
             } 
 
             / /   f u n c t i o n 
             e l s e   i f   ( t y p e o f   d a t a   = =   " f u n c t i o n " )   { 
                 r e p l y   =   " f u n c t i o n " ; 
             } 
 
             / /   A r r a y 
             e l s e   i f   ( d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
                 i f   ( s h o w L e v e l s   = =   0 )   {   / /   S h o r t   f o r m a t   ( d o n ' t   s h o w   i t e m s ) 
                     i f   ( d a t a . l e n g t h   >   0 ) 
                         r e p l y   =   " [ . . . ] " ; 
                     e l s e 
                         r e p l y   =   " [ ] " ; 
                 } 
                 e l s e   {   / /   L o n g   f o r m a t   ( s h o w   i t e m s ) 
                     v a r   s t r a r r   =   [ ] ; 
                     s t r a r r . p u s h ( " [ " ) ; 
                     v a r   c o u n t   =   0 ; 
                     f o r   ( v a r   i   =   0 ;   i   <   d a t a . l e n g t h ;   i + + )   { 
                         i f   ( !   ( i   i n   d a t a ) )   c o n t i n u e ; 
                         v a r   i t e m v a l u e   =   d a t a [ i ] ; 
                         i f   ( c o u n t   >   0 )   s t r a r r . p u s h ( " ,   " ) ; 
                         i f   ( s h o w L e v e l s   = =   1 )   {   / /   O n e - l i n e   f o r m a t 
                             i f   ( c o u n t   = =   o p t i o n s . o n e L i n e M a x I t e m s )   { 
                                 s t r a r r . p u s h ( " . . . " ) ; 
                                 b r e a k ; 
                             } 
                         } 
                         e l s e   {   / /   M u l t i - l i n e   f o r m a t 
                             s t r a r r . p u s h ( o p t i o n s . l i n e T e r m i n a t o r   +   i n d e n t ( i n d e n t D e p t h + 1 ,   o p t i o n s ) ) ; 
                         } 
                         i f   ( i   ! =   c o u n t )   { 
                             s t r a r r . p u s h ( i ) ; 
                             s t r a r r . p u s h ( " : " ) ; 
                         } 
                         s t r a r r . p u s h ( r e c u r s i v e ( i t e m v a l u e ,   s h o w L e v e l s - 1 ,   i n d e n t D e p t h + 1 ,   o p t i o n s ) ) ; 
                         c o u n t + + ; 
                     } 
                     i f   ( s h o w L e v e l s   >   1 )   s t r a r r . p u s h ( o p t i o n s . l i n e T e r m i n a t o r   +   i n d e n t ( i n d e n t D e p t h ,   o p t i o n s ) ) ; 
                     s t r a r r . p u s h ( " ] " ) ; 
                     r e p l y   =   s t r a r r . j o i n ( " " ) ; 
                 } 
             } 
 
             / /   O b j e c t s   e x c e p t   D a t e 
             e l s e   i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a )   & &   ! d w r . u t i l . _ i s D a t e ( d a t a ) )   { 
                 i f   ( s h o w L e v e l s   = =   0 )   {   / /   S h o r t   f o r m a t   ( d o n ' t   s h o w   p r o p e r t i e s ) 
                     r e p l y   =   d w r . u t i l . _ d e t a i l e d T y p e O f ( d a t a ) ; 
                 } 
                 e l s e   {   / /   L o n g   f o r m a t   ( s h o w   p r o p e r t i e s ) 
                     v a r   s t r a r r   =   [ ] ; 
                     i f   ( d w r . u t i l . _ d e t a i l e d T y p e O f ( d a t a )   ! =   " O b j e c t " )   { 
                         s t r a r r . p u s h ( d w r . u t i l . _ d e t a i l e d T y p e O f ( d a t a ) ) ; 
                         i f   ( t y p e o f   d a t a . v a l u e O f ( )   ! =   " o b j e c t " )   { 
                             s t r a r r . p u s h ( " : " ) ; 
                             s t r a r r . p u s h ( r e c u r s i v e ( d a t a . v a l u e O f ( ) ,   1 ,   i n d e n t D e p t h ,   o p t i o n s ) ) ; 
                         } 
                         s t r a r r . p u s h ( "   " ) ; 
                     } 
                     s t r a r r . p u s h ( " { " ) ; 
                     v a r   i s D o m O b j e c t   =   d w r . u t i l . _ i s H T M L E l e m e n t ( d a t a ) ; 
                     v a r   c o u n t   =   0 ; 
                     f o r   ( v a r   p r o p   i n   d a t a )   { 
                         v a r   p r o p v a l u e   =   d a t a [ p r o p ] ; 
                         i f   ( i s D o m O b j e c t )   { 
                             i f   ( ! p r o p v a l u e )   c o n t i n u e ; 
                             i f   ( t y p e o f   p r o p v a l u e   = =   " f u n c t i o n " )   c o n t i n u e ; 
                             i f   ( s k i p D o m P r o p e r t i e s [ p r o p ] )   c o n t i n u e ; 
                             i f   ( p r o p . t o U p p e r C a s e ( )   = =   p r o p )   c o n t i n u e ; 
                         } 
                         i f   ( c o u n t   >   0 )   s t r a r r . p u s h ( " ,   " ) ; 
                         i f   ( s h o w L e v e l s   = =   1 )   {   / /   O n e - l i n e   f o r m a t 
                             i f   ( c o u n t   = =   o p t i o n s . o n e L i n e M a x I t e m s )   { 
                                 s t r a r r . p u s h ( " . . . " ) ; 
                                 b r e a k ; 
                             } 
                         } 
                         e l s e   {   / /   M u l t i - l i n e   f o r m a t 
                             s t r a r r . p u s h ( o p t i o n s . l i n e T e r m i n a t o r   +   i n d e n t ( i n d e n t D e p t h + 1 ,   o p t i o n s ) ) ; 
                         } 
                         s t r a r r . p u s h ( p r o p . l e n g t h   >   o p t i o n s . p r o p e r t y N a m e M a x L e n g t h   ?   p r o p . s u b s t r i n g ( 0 ,   o p t i o n s . p r o p e r t y N a m e M a x L e n g t h - 3 )   +   " . . . "   :   p r o p ) ; 
                         s t r a r r . p u s h ( " : " ) ; 
                         s t r a r r . p u s h ( r e c u r s i v e ( p r o p v a l u e ,   s h o w L e v e l s - 1 ,   i n d e n t D e p t h + 1 ,   o p t i o n s ) ) ; 
                         c o u n t + + ; 
                     } 
                     i f   ( s h o w L e v e l s   >   1   & &   c o u n t   >   0 )   s t r a r r . p u s h ( o p t i o n s . l i n e T e r m i n a t o r   +   i n d e n t ( i n d e n t D e p t h ,   o p t i o n s ) ) ; 
                     s t r a r r . p u s h ( " } " ) ; 
                     r e p l y   =   s t r a r r . j o i n ( " " ) ; 
                 } 
             } 
 
             / /   u n d e f i n e d ,   n u l l ,   n u m b e r ,   b o o l e a n ,   D a t e 
             e l s e   { 
                 r e p l y   =   " "   +   d a t a ; 
             } 
 
             r e t u r n   r e p l y ; 
         } 
         c a t c h ( e r r )   { 
             r e t u r n   ( e r r . m e s s a g e   ?   e r r . m e s s a g e   :   " " + e r r ) ; 
         } 
     } 
 
     f u n c t i o n   i n d e n t ( c o u n t ,   o p t i o n s )   { 
         v a r   s t r a r r   =   [ ] ; 
         s t r a r r . p u s h ( o p t i o n s . b a s e I n d e n t ) ; 
         f o r   ( v a r   i = 0 ;   i < c o u n t ;   i + + )   { 
             s t r a r r . p u s h ( o p t i o n s . c h i l d I n d e n t ) ; 
         } 
         r e t u r n   s t r a r r . j o i n ( " " ) ; 
     } ; 
 
     r e t u r n   r e c u r s i v e ( d a t a ,   s h o w L e v e l s ,   0 ,   o p t ) ; 
 } ; 
 
 / * * 
   *   S e t u p   a   G M a i l   s t y l e   l o a d i n g   m e s s a g e . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / u s e l o a d i n g m e s s a g e 
   * / 
 d w r . u t i l . u s e L o a d i n g M e s s a g e   =   f u n c t i o n ( m e s s a g e )   { 
     v a r   l o a d i n g M e s s a g e ; 
     i f   ( m e s s a g e )   l o a d i n g M e s s a g e   =   m e s s a g e ; 
     e l s e   l o a d i n g M e s s a g e   =   " L o a d i n g " ; 
     d w r . e n g i n e . s e t P r e H o o k ( f u n c t i o n ( )   { 
         v a r   d i s a b l e d Z o n e   =   d w r . u t i l . b y I d ( ' d i s a b l e d Z o n e ' ) ; 
         i f   ( ! d i s a b l e d Z o n e )   { 
             d i s a b l e d Z o n e   =   d o c u m e n t . c r e a t e E l e m e n t ( ' d i v ' ) ; 
             d i s a b l e d Z o n e . s e t A t t r i b u t e ( ' i d ' ,   ' d i s a b l e d Z o n e ' ) ; 
             d i s a b l e d Z o n e . s t y l e . p o s i t i o n   =   " a b s o l u t e " ; 
             d i s a b l e d Z o n e . s t y l e . z I n d e x   =   " 1 0 0 0 " ; 
             d i s a b l e d Z o n e . s t y l e . l e f t   =   " 0 p x " ; 
             d i s a b l e d Z o n e . s t y l e . t o p   =   " 0 p x " ; 
             d i s a b l e d Z o n e . s t y l e . w i d t h   =   " 1 0 0 % " ; 
             d i s a b l e d Z o n e . s t y l e . h e i g h t   =   " 1 0 0 % " ; 
             d o c u m e n t . b o d y . a p p e n d C h i l d ( d i s a b l e d Z o n e ) ; 
             v a r   m e s s a g e Z o n e   =   d o c u m e n t . c r e a t e E l e m e n t ( ' d i v ' ) ; 
             m e s s a g e Z o n e . s e t A t t r i b u t e ( ' i d ' ,   ' m e s s a g e Z o n e ' ) ; 
             m e s s a g e Z o n e . s t y l e . p o s i t i o n   =   " a b s o l u t e " ; 
             m e s s a g e Z o n e . s t y l e . t o p   =   " 0 p x " ; 
             m e s s a g e Z o n e . s t y l e . r i g h t   =   " 0 p x " ; 
             m e s s a g e Z o n e . s t y l e . b a c k g r o u n d   =   " r e d " ; 
             m e s s a g e Z o n e . s t y l e . c o l o r   =   " w h i t e " ; 
             m e s s a g e Z o n e . s t y l e . f o n t F a m i l y   =   " A r i a l , H e l v e t i c a , s a n s - s e r i f " ; 
             m e s s a g e Z o n e . s t y l e . p a d d i n g   =   " 4 p x " ; 
             d i s a b l e d Z o n e . a p p e n d C h i l d ( m e s s a g e Z o n e ) ; 
             v a r   t e x t   =   d o c u m e n t . c r e a t e T e x t N o d e ( l o a d i n g M e s s a g e ) ; 
             m e s s a g e Z o n e . a p p e n d C h i l d ( t e x t ) ; 
             d w r . u t i l . _ d i s a b l e d Z o n e U s e C o u n t   =   1 ; 
         } 
         e l s e   { 
             d w r . u t i l . b y I d ( ' m e s s a g e Z o n e ' ) . i n n e r H T M L   =   l o a d i n g M e s s a g e ; 
             d i s a b l e d Z o n e . s t y l e . v i s i b i l i t y   =   ' v i s i b l e ' ; 
             d w r . u t i l . _ d i s a b l e d Z o n e U s e C o u n t + + ; 
         } 
     } ) ; 
     d w r . e n g i n e . s e t P o s t H o o k ( f u n c t i o n ( )   { 
         d w r . u t i l . _ d i s a b l e d Z o n e U s e C o u n t - - ; 
         i f   ( d w r . u t i l . _ d i s a b l e d Z o n e U s e C o u n t   = =   0 )   { 
             d w r . u t i l . b y I d ( ' d i s a b l e d Z o n e ' ) . s t y l e . v i s i b i l i t y   =   ' h i d d e n ' ; 
         } 
     } ) ; 
 } ; 
 
 / * * 
   *   S e t   a   g l o b a l   h i g h l i g h t   h a n d l e r 
   * / 
 d w r . u t i l . s e t H i g h l i g h t H a n d l e r   =   f u n c t i o n ( h a n d l e r )   { 
     d w r . u t i l . _ h i g h l i g h t H a n d l e r   =   h a n d l e r ; 
 } ; 
 
 / * * 
   *   A n   e x a m p l e   h i g h l i g h t   h a n d l e r 
   * / 
 d w r . u t i l . y e l l o w F a d e H i g h l i g h t H a n d l e r   =   f u n c t i o n ( e l e )   { 
     d w r . u t i l . _ y e l l o w F a d e P r o c e s s ( e l e ,   0 ) ; 
 } ; 
 d w r . u t i l . _ y e l l o w F a d e S t e p s   =   [   " d 0 " ,   " b 0 " ,   " a 0 " ,   " 9 0 " ,   " 9 8 " ,   " a 0 " ,   " a 8 " ,   " b 0 " ,   " b 8 " ,   " c 0 " ,   " c 8 " ,   " d 0 " ,   " d 8 " ,   " e 0 " ,   " e 8 " ,   " f 0 " ,   " f 8 "   ] ; 
 d w r . u t i l . _ y e l l o w F a d e P r o c e s s   =   f u n c t i o n ( e l e ,   c o l o r I n d e x )   { 
     e l e   =   d w r . u t i l . b y I d ( e l e ) ; 
     i f   ( c o l o r I n d e x   <   d w r . u t i l . _ y e l l o w F a d e S t e p s . l e n g t h )   { 
         e l e . s t y l e . b a c k g r o u n d C o l o r   =   " # f f f f "   +   d w r . u t i l . _ y e l l o w F a d e S t e p s [ c o l o r I n d e x ] ; 
         s e t T i m e o u t ( " d w r . u t i l . _ y e l l o w F a d e P r o c e s s ( ' "   +   e l e . i d   +   " ' , "   +   ( c o l o r I n d e x   +   1 )   +   " ) " ,   2 0 0 ) ; 
     } 
     e l s e   { 
         e l e . s t y l e . b a c k g r o u n d C o l o r   =   " t r a n s p a r e n t " ; 
     } 
 } ; 
 
 / * * 
   *   A n   e x a m p l e   h i g h l i g h t   h a n d l e r 
   * / 
 d w r . u t i l . b o r d e r F a d e H i g h l i g h t H a n d l e r   =   f u n c t i o n ( e l e )   { 
     e l e . s t y l e . b o r d e r W i d t h   =   " 2 p x " ; 
     e l e . s t y l e . b o r d e r S t y l e   =   " s o l i d " ; 
     d w r . u t i l . _ b o r d e r F a d e P r o c e s s ( e l e ,   0 ) ; 
 } ; 
 d w r . u t i l . _ b o r d e r F a d e S t e p s   =   [   " d 0 " ,   " b 0 " ,   " a 0 " ,   " 9 0 " ,   " 9 8 " ,   " a 0 " ,   " a 8 " ,   " b 0 " ,   " b 8 " ,   " c 0 " ,   " c 8 " ,   " d 0 " ,   " d 8 " ,   " e 0 " ,   " e 8 " ,   " f 0 " ,   " f 8 "   ] ; 
 d w r . u t i l . _ b o r d e r F a d e P r o c e s s   =   f u n c t i o n ( e l e ,   c o l o r I n d e x )   { 
     e l e   =   d w r . u t i l . b y I d ( e l e ) ; 
     i f   ( c o l o r I n d e x   <   d w r . u t i l . _ b o r d e r F a d e S t e p s . l e n g t h )   { 
         e l e . s t y l e . b o r d e r C o l o r   =   " # f f "   +   d w r . u t i l . _ b o r d e r F a d e S t e p s [ c o l o r I n d e x ]   +   d w r . u t i l . _ b o r d e r F a d e S t e p s [ c o l o r I n d e x ] ; 
         s e t T i m e o u t ( " d w r . u t i l . _ b o r d e r F a d e P r o c e s s ( ' "   +   e l e . i d   +   " ' , "   +   ( c o l o r I n d e x   +   1 )   +   " ) " ,   2 0 0 ) ; 
     } 
     e l s e   { 
         e l e . s t y l e . b a c k g r o u n d C o l o r   =   " t r a n s p a r e n t " ; 
     } 
 } ; 
 
 / * * 
   *   A   f o c u s   h i g h l i g h t   h a n d l e r 
   * / 
 d w r . u t i l . f o c u s H i g h l i g h t H a n d l e r   =   f u n c t i o n ( e l e )   { 
     t r y   { 
         e l e . f o c u s ( ) ; 
     } 
     c a t c h   ( e x )   {   / *   i g n o r e   * /   } 
 } ; 
 
 / * *   @ p r i v a t e   t h e   c u r r e n t   g l o b a l   h i g h l i g h t   s t y l e   * / 
 d w r . u t i l . _ h i g h l i g h t H a n d l e r   =   n u l l ; 
 
 / * * 
   *   H i g h l i g h t   t h a t   a n   e l e m e n t   h a s   c h a n g e d 
   * / 
 d w r . u t i l . h i g h l i g h t   =   f u n c t i o n ( e l e ,   o p t i o n s )   { 
     i f   ( o p t i o n s   & &   o p t i o n s . h i g h l i g h t H a n d l e r )   { 
         o p t i o n s . h i g h l i g h t H a n d l e r ( d w r . u t i l . b y I d ( e l e ) ) ; 
     } 
     e l s e   i f   ( d w r . u t i l . _ h i g h l i g h t H a n d l e r   ! =   n u l l )   { 
         d w r . u t i l . _ h i g h l i g h t H a n d l e r ( d w r . u t i l . b y I d ( e l e ) ) ; 
     } 
 } ; 
 
 / * * 
   *   S e t   t h e   v a l u e   a n   H T M L   e l e m e n t   t o   t h e   s p e c i f i e d   v a l u e . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / s e t v a l u e 
   * / 
 d w r . u t i l . s e t V a l u e   =   f u n c t i o n ( e l e ,   v a l ,   o p t i o n s )   { 
     i f   ( v a l   = =   n u l l )   v a l   =   " " ; 
     i f   ( o p t i o n s   = =   n u l l )   o p t i o n s   =   { } ; 
 
     v a r   o r i g   =   e l e ; 
     i f   ( t y p e o f   e l e   = =   " s t r i n g " )   { 
         e l e   =   d w r . u t i l . b y I d ( e l e ) ; 
         / /   W e   c a n   w o r k   w i t h   n a m e s   a n d   n e e d   t o   s o m e t i m e s   f o r   r a d i o   b u t t o n s ,   a n d   I E   h a s 
         / /   a n   a n n o y i n g   b u g   w h e r e   g e t E l e m e n t B y I d ( )   r e t u r n s   a n   e l e m e n t   b a s e d   o n   n a m e   i f 
         / /   i t   d o e s n ' t   f i n d   i t   b y   i d .   H e r e   w e   d o n ' t   w a n t   t o   d o   t h a t ,   s o : 
         i f   ( e l e   & &   e l e . i d   ! =   o r i g )   e l e   =   n u l l ; 
     } 
     v a r   n o d e s   =   n u l l ; 
     i f   ( e l e   = =   n u l l )   { 
         / /   N o w   i t   i s   t i m e   t o   l o o k   b y   n a m e 
         n o d e s   =   d o c u m e n t . g e t E l e m e n t s B y N a m e ( o r i g ) ; 
         i f   ( n o d e s . l e n g t h   > =   1 )   e l e   =   n o d e s . i t e m ( 0 ) ; 
     } 
 
     i f   ( e l e   = =   n u l l )   { 
         d w r . u t i l . _ d e b u g ( " s e t V a l u e ( )   c a n ' t   f i n d   a n   e l e m e n t   w i t h   i d / n a m e :   "   +   o r i g   +   " . " ) ; 
         r e t u r n ; 
     } 
 
     / /   A l l   p a t h s   n o w   l e a d   t o   s o m e   u p d a t e   s o   w e   h i g h l i g h t   a   c h a n g e 
     d w r . u t i l . h i g h l i g h t ( e l e ,   o p t i o n s ) ; 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " s e l e c t " ) )   { 
         i f   ( e l e . t y p e   = =   " s e l e c t - m u l t i p l e "   & &   d w r . u t i l . _ i s A r r a y ( v a l ) )   d w r . u t i l . _ s e l e c t L i s t I t e m s ( e l e ,   v a l ) ; 
         e l s e   d w r . u t i l . _ s e l e c t L i s t I t e m ( e l e ,   v a l ) ; 
         r e t u r n ; 
     } 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " i n p u t " ) )   { 
         i f   ( e l e . t y p e   = =   " r a d i o "   | |   e l e . t y p e   = =   " c h e c k b o x " )   { 
             i f   ( n o d e s   & &   n o d e s . l e n g t h   > =   1 )   { 
                 f o r   ( v a r   i   =   0 ;   i   <   n o d e s . l e n g t h ;   i + + )   { 
                     v a r   n o d e   =   n o d e s . i t e m ( i ) ; 
                     i f   ( n o d e . t y p e   ! =   e l e . t y p e )   c o n t i n u e ; 
                     i f   ( d w r . u t i l . _ i s A r r a y ( v a l ) )   { 
                         n o d e . c h e c k e d   =   f a l s e ; 
                         f o r   ( v a r   j   =   0 ;   j   <   v a l . l e n g t h ;   j + + ) 
                             i f   ( v a l [ j ]   = =   n o d e . v a l u e )   n o d e . c h e c k e d   =   t r u e ; 
                     } 
                     e l s e   { 
                         n o d e . c h e c k e d   =   ( n o d e . v a l u e   = =   v a l ) ; 
                     } 
                 } 
             } 
             e l s e   { 
                 e l e . c h e c k e d   =   ( v a l   = =   t r u e ) ; 
             } 
         } 
         e l s e   e l e . v a l u e   =   v a l ; 
 
         r e t u r n ; 
     } 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " t e x t a r e a " ) )   { 
         e l e . v a l u e   =   v a l ; 
         r e t u r n ; 
     } 
 
     / /   I f   t h e   v a l u e   t o   b e   s e t   i s   a   D O M   o b j e c t   t h e n   w e   t r y   i m p o r t i n g   t h e   n o d e 
     / /   r a t h e r   t h a n   s e r i a l i z i n g   i t   o u t 
     i f   ( v a l . n o d e T y p e )   { 
         i f   ( v a l . n o d e T y p e   = =   9   / * N o d e . D O C U M E N T _ N O D E * / )   v a l   =   v a l . d o c u m e n t E l e m e n t ; 
         v a l   =   d w r . u t i l . _ i m p o r t N o d e ( e l e . o w n e r D o c u m e n t ,   v a l ,   t r u e ) ; 
         e l e . a p p e n d C h i l d ( v a l ) ; 
         r e t u r n ; 
     } 
 
     / /   F a l l   b a c k   t o   i n n e r H T M L   a n d   f r i e n d s 
     i f   ( d w r . u t i l . _ s h o u l d E s c a p e H t m l ( o p t i o n s )   & &   t y p e o f ( v a l )   = =   " s t r i n g " )   { 
         i f   ( e l e . t e x t C o n t e n t )   e l e . t e x t C o n t e n t   =   v a l ; 
         e l s e   i f   ( e l e . i n n e r T e x t )   e l e . i n n e r T e x t   =   v a l ; 
         e l s e   e l e . i n n e r H T M L   =   d w r . u t i l . e s c a p e H t m l ( v a l ) ; 
     } 
     e l s e   { 
         e l e . i n n e r H T M L   =   v a l ; 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   F i n d   m u l t i p l e   i t e m s   i n   a   s e l e c t   l i s t   a n d   s e l e c t   t h e m .   U s e d   b y   s e t V a l u e ( ) 
   *   @ p a r a m   e l e   T h e   s e l e c t   l i s t   i t e m 
   *   @ p a r a m   v a l   T h e   a r r a y   o f   v a l u e s   t o   s e l e c t 
   * / 
 d w r . u t i l . _ s e l e c t L i s t I t e m s   =   f u n c t i o n ( e l e ,   v a l )   { 
     / /   W e   d e a l   w i t h   s e l e c t   l i s t   e l e m e n t s   b y   s e l e c t i n g   t h e   m a t c h i n g   o p t i o n 
     / /   B e g i n   b y   s e a r c h i n g   t h r o u g h   t h e   v a l u e s 
     v a r   f o u n d     =   f a l s e ; 
     v a r   i ; 
     v a r   j ; 
     f o r   ( i   =   0 ;   i   <   e l e . o p t i o n s . l e n g t h ;   i + + )   { 
         e l e . o p t i o n s [ i ] . s e l e c t e d   =   f a l s e ; 
         f o r   ( j   =   0 ;   j   <   v a l . l e n g t h ;   j + + )   { 
             i f   ( e l e . o p t i o n s [ i ] . v a l u e   = =   v a l [ j ] )   { 
                 e l e . o p t i o n s [ i ] . s e l e c t e d   =   t r u e ; 
             } 
         } 
     } 
     / /   I f   t h a t   f a i l s   t h e n   t r y   s e a r c h i n g   t h r o u g h   t h e   v i s i b l e   t e x t 
     i f   ( f o u n d )   r e t u r n ; 
 
     f o r   ( i   =   0 ;   i   <   e l e . o p t i o n s . l e n g t h ;   i + + )   { 
         f o r   ( j   =   0 ;   j   <   v a l . l e n g t h ;   j + + )   { 
             i f   ( e l e . o p t i o n s [ i ] . t e x t   = =   v a l [ j ] )   { 
                 e l e . o p t i o n s [ i ] . s e l e c t e d   =   t r u e ; 
             } 
         } 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   F i n d   a n   i t e m   i n   a   s e l e c t   l i s t   a n d   s e l e c t   i t .   U s e d   b y   s e t V a l u e ( ) 
   *   @ p a r a m   e l e   T h e   s e l e c t   l i s t   i t e m 
   *   @ p a r a m   v a l   T h e   v a l u e   t o   s e l e c t 
   * / 
 d w r . u t i l . _ s e l e c t L i s t I t e m   =   f u n c t i o n ( e l e ,   v a l )   { 
     / /   W e   d e a l   w i t h   s e l e c t   l i s t   e l e m e n t s   b y   s e l e c t i n g   t h e   m a t c h i n g   o p t i o n 
     / /   B e g i n   b y   s e a r c h i n g   t h r o u g h   t h e   v a l u e s 
     v a r   f o u n d   =   f a l s e ; 
     v a r   i ; 
     f o r   ( i   =   0 ;   i   <   e l e . o p t i o n s . l e n g t h ;   i + + )   { 
         i f   ( e l e . o p t i o n s [ i ] . v a l u e   = =   v a l )   { 
             e l e . o p t i o n s [ i ] . s e l e c t e d   =   t r u e ; 
             f o u n d   =   t r u e ; 
         } 
         e l s e   { 
             e l e . o p t i o n s [ i ] . s e l e c t e d   =   f a l s e ; 
         } 
     } 
 
     / /   I f   t h a t   f a i l s   t h e n   t r y   s e a r c h i n g   t h r o u g h   t h e   v i s i b l e   t e x t 
     i f   ( f o u n d )   r e t u r n ; 
 
     f o r   ( i   =   0 ;   i   <   e l e . o p t i o n s . l e n g t h ;   i + + )   { 
         e l e . o p t i o n s [ i ] . s e l e c t e d   =   ( e l e . o p t i o n s [ i ] . t e x t   = =   v a l ) ; 
     } 
 } ; 
 
 / * * 
   *   R e a d   t h e   c u r r e n t   v a l u e   f o r   a   g i v e n   H T M L   e l e m e n t . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / g e t v a l u e 
   * / 
 d w r . u t i l . g e t V a l u e   =   f u n c t i o n ( e l e ,   o p t i o n s )   { 
     i f   ( o p t i o n s   = =   n u l l )   o p t i o n s   =   { } ; 
     v a r   o r i g   =   e l e ; 
     i f   ( t y p e o f   e l e   = =   " s t r i n g " )   { 
         e l e   =   d w r . u t i l . b y I d ( e l e ) ; 
         / /   W e   c a n   w o r k   w i t h   n a m e s   a n d   n e e d   t o   s o m e t i m e s   f o r   r a d i o   b u t t o n s ,   a n d   I E   h a s 
         / /   a n   a n n o y i n g   b u g   w h e r e   g e t E l e m e n t B y I d ( )   r e t u r n s   a n   e l e m e n t   b a s e d   o n   n a m e   i f 
         / /   i t   d o e s n ' t   f i n d   i t   b y   i d .   H e r e   w e   d o n ' t   w a n t   t o   d o   t h a t ,   s o : 
         i f   ( e l e   & &   e l e . i d   ! =   o r i g )   e l e   =   n u l l ; 
     } 
     v a r   n o d e s   =   n u l l ; 
     i f   ( e l e   = =   n u l l )   { 
         / /   N o w   i t   i s   t i m e   t o   l o o k   b y   n a m e 
         n o d e s   =   d o c u m e n t . g e t E l e m e n t s B y N a m e ( o r i g ) ; 
         i f   ( n o d e s . l e n g t h   > =   1 )   e l e   =   n o d e s . i t e m ( 0 ) ; 
     } 
     i f   ( e l e   = =   n u l l )   { 
         d w r . u t i l . _ d e b u g ( " g e t V a l u e ( )   c a n ' t   f i n d   a n   e l e m e n t   w i t h   i d / n a m e :   "   +   o r i g   +   " . " ) ; 
         r e t u r n   " " ; 
     } 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " s e l e c t " ) )   { 
         / /   U s i n g   " t y p e "   p r o p e r t y   i n s t e a d   o f   " m u l t i p l e "   a s   " t y p e "   i s   a n   o f f i c i a l 
         / /   c l i e n t - s i d e   p r o p e r t y   s i n c e   J S   1 . 1 
         i f   ( e l e . t y p e   = =   " s e l e c t - m u l t i p l e " )   { 
             v a r   r e p l y   =   n e w   A r r a y ( ) ; 
             f o r   ( v a r   i   =   0 ;   i   <   e l e . o p t i o n s . l e n g t h ;   i + + )   { 
                 v a r   i t e m   =   e l e . o p t i o n s [ i ] ; 
                 i f   ( i t e m . s e l e c t e d )   { 
                     v a r   v a l u e A t t r   =   i t e m . g e t A t t r i b u t e N o d e ( " v a l u e " ) ; 
                     i f   ( v a l u e A t t r   & &   v a l u e A t t r . s p e c i f i e d )   { 
                         r e p l y . p u s h ( i t e m . v a l u e ) ; 
                     } 
                     e l s e   { 
                         r e p l y . p u s h ( i t e m . t e x t ) ; 
                     } 
                 } 
             } 
             r e t u r n   r e p l y ; 
         } 
         e l s e   { 
             v a r   s e l   =   e l e . s e l e c t e d I n d e x ; 
             i f   ( s e l   ! =   - 1 )   { 
                 v a r   i t e m   =   e l e . o p t i o n s [ s e l ] ; 
                 v a r   v a l u e A t t r   =   i t e m . g e t A t t r i b u t e N o d e ( " v a l u e " ) ; 
                 i f   ( v a l u e A t t r   & &   v a l u e A t t r . s p e c i f i e d )   { 
                     r e t u r n   i t e m . v a l u e ; 
                 } 
                 r e t u r n   i t e m . t e x t ; 
             } 
             e l s e   { 
                 r e t u r n   " " ; 
             } 
         } 
     } 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " i n p u t " ) )   { 
         i f   ( e l e . t y p e   = =   " r a d i o " )   { 
             i f   ( n o d e s   & &   n o d e s . l e n g t h   > =   1 )   { 
                 f o r   ( v a r   i   =   0 ;   i   <   n o d e s . l e n g t h ;   i + + )   { 
                     v a r   n o d e   =   n o d e s . i t e m ( i ) ; 
                     i f   ( n o d e . t y p e   = =   e l e . t y p e )   { 
                         i f   ( n o d e . c h e c k e d )   r e t u r n   n o d e . v a l u e ; 
                     } 
                 } 
             } 
             r e t u r n   e l e . c h e c k e d ; 
         } 
         i f   ( e l e . t y p e   = =   " c h e c k b o x " )   { 
             i f   ( n o d e s   & &   n o d e s . l e n g t h   > =   1 )   { 
                 v a r   r e p l y   =   [ ] ; 
                 f o r   ( v a r   i   =   0 ;   i   <   n o d e s . l e n g t h ;   i + + )   { 
                     v a r   n o d e   =   n o d e s . i t e m ( i ) ; 
                     i f   ( n o d e . t y p e   = =   e l e . t y p e )   { 
                         i f   ( n o d e . c h e c k e d )   r e p l y . p u s h ( n o d e . v a l u e ) ; 
                     } 
                 } 
                 r e t u r n   r e p l y ; 
             } 
             r e t u r n   e l e . c h e c k e d ; 
         } 
         r e t u r n   e l e . v a l u e ; 
     } 
 
     i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " t e x t a r e a " ) )   { 
         r e t u r n   e l e . v a l u e ; 
     } 
 
     i f   ( d w r . u t i l . _ s h o u l d E s c a p e H t m l ( o p t i o n s ) )   { 
         i f   ( e l e . t e x t C o n t e n t )   r e t u r n   e l e . t e x t C o n t e n t ; 
         e l s e   i f   ( e l e . i n n e r T e x t )   r e t u r n   e l e . i n n e r T e x t ; 
     } 
     r e t u r n   e l e . i n n e r H T M L ; 
 } ; 
 
 / * * 
   *   g e t T e x t ( )   i s   l i k e   g e t V a l u e ( )   e x c e p t   t h a t   i t   r e a d s   t h e   t e x t   ( a n d   n o t   t h e   v a l u e )   f r o m   s e l e c t   e l e m e n t s 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / g e t t e x t 
   * / 
 d w r . u t i l . g e t T e x t   =   f u n c t i o n ( e l e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " g e t T e x t ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n   n u l l ; 
     i f   ( ! d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " s e l e c t " ) )   { 
         d w r . u t i l . _ d e b u g ( " g e t T e x t ( )   c a n   o n l y   b e   u s e d   w i t h   s e l e c t   e l e m e n t s .   A t t e m p t   t o   u s e :   "   +   d w r . u t i l . _ d e t a i l e d T y p e O f ( e l e )   +   "   f r o m     i d :   "   +   o r i g   +   " . " ) ; 
         r e t u r n   " " ; 
     } 
 
     / /   T h i s   i s   a   b i t   o f   a   s c a m   b e c a u s e   i t   a s s u m e s   s i n g l e   s e l e c t 
     / /   b u t   I ' m   n o t   s u r e   h o w   w e   s h o u l d   t r e a t   m u l t i - s e l e c t . 
     v a r   s e l   =   e l e . s e l e c t e d I n d e x ; 
     i f   ( s e l   ! =   - 1 )   { 
         r e t u r n   e l e . o p t i o n s [ s e l ] . t e x t ; 
     } 
     e l s e   { 
         r e t u r n   " " ; 
     } 
 } ; 
 
 / * * 
   *   G i v e n   a   m a p ,   o r   a   r e c u r s i v e   s t r u c t u r e   c o n s i s t i n g   o f   a r r a y s   a n d   m a p s ,   c a l l 
   *   s e t V a l u e ( )   f o r   a l l   l e a f   e n t r i e s   a n d   u s e   i n t e r m e d i a t e   l e v e l s   t o   f o r m   n e s t e d 
   *   e l e m e n t   i d s . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / s e t v a l u e s 
   * / 
 d w r . u t i l . s e t V a l u e s   =   f u n c t i o n ( d a t a ,   o p t i o n s )   { 
     v a r   p r e f i x   =   " " ; 
     i f   ( o p t i o n s   & &   o p t i o n s . p r e f i x )   p r e f i x   =   o p t i o n s . p r e f i x ; 
     i f   ( o p t i o n s   & &   o p t i o n s . i d P r e f i x )   p r e f i x   =   o p t i o n s . i d P r e f i x ; 
     d w r . u t i l . _ s e t V a l u e s R e c u r s i v e ( d a t a ,   p r e f i x ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   R e c u r s i v e   h e l p e r   f o r   s e t V a l u e s ( ) 
   * / 
 d w r . u t i l . _ s e t V a l u e s R e c u r s i v e   =   f u n c t i o n ( d a t a ,   i d p a t h )   { 
     / /   A r r a y   c o n t a i n i n g   o b j e c t s   - >   a d d   " [ n ] "   t o   p r e f i x   a n d   m a k e   r e c u r s i v e   c a l l 
     / /   f o r   e a c h   i t e m   o b j e c t 
     i f   ( d w r . u t i l . _ i s A r r a y ( d a t a )   & &   d a t a . l e n g t h   >   0   & &   d w r . u t i l . _ i s O b j e c t ( d a t a [ 0 ] ) )   { 
         f o r   ( v a r   i   =   0 ;   i   <   d a t a . l e n g t h ;   i + + )   { 
             d w r . u t i l . _ s e t V a l u e s R e c u r s i v e ( d a t a [ i ] ,   i d p a t h + " [ " + i + " ] " ) ; 
         } 
     } 
     / /   O b j e c t   ( n o t   a r r a y )   - >   h a n d l e   n e s t e d   o b j e c t   p r o p e r t i e s 
     e l s e   i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a )   & &   ! d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         f o r   ( v a r   p r o p   i n   d a t a )   { 
             v a r   s u b i d p a t h   =   i d p a t h   ?   i d p a t h + " . " + p r o p   :   p r o p ; 
             / /   O b j e c t   ( n o t   a r r a y ) ,   o r   a r r a y   c o n t a i n i n g   o b j e c t s   - >   c a l l   o u r s e l v e s   r e c u r s i v e l y 
             i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a [ p r o p ] )   & &   ! d w r . u t i l . _ i s A r r a y ( d a t a [ p r o p ] ) 
                     | |   d w r . u t i l . _ i s A r r a y ( d a t a [ p r o p ] )   & &   d a t a [ p r o p ] . l e n g t h   >   0   & &   d w r . u t i l . _ i s O b j e c t ( d a t a [ p r o p ] [ 0 ] ) )   { 
                 d w r . u t i l . _ s e t V a l u e s R e c u r s i v e ( d a t a [ p r o p ] ,   s u b i d p a t h ) ; 
             } 
             / /   F u n c t i o n s   - >   s k i p 
             e l s e   i f   ( t y p e o f   d a t a [ p r o p ]   = =   " f u n c t i o n " )   { 
                 / /   N O P 
             } 
             / /   O n l y   s i m p l e   v a l u e s   l e f t   ( o r   a r r a y   o f   s i m p l e   v a l u e s ,   o r   e m p t y   a r r a y ) 
             / /   - >   c a l l   s e t V a l u e ( ) 
             e l s e   { 
                 / /   A r e   t h e r e   a n y   e l e m e n t s   w i t h   t h a t   i d   o r   n a m e 
                 i f   ( d w r . u t i l . b y I d ( s u b i d p a t h )   ! =   n u l l   | |   d o c u m e n t . g e t E l e m e n t s B y N a m e ( s u b i d p a t h ) . l e n g t h   > =   1 )   { 
                     d w r . u t i l . s e t V a l u e ( s u b i d p a t h ,   d a t a [ p r o p ] ) ; 
                 } 
             } 
         } 
     } 
 } ; 
 
 / * * 
   *   G i v e n   a   m a p ,   o r   a   r e c u r s i v e   s t r u c t u r e   c o n s i s t i n g   o f   a r r a y s   a n d   m a p s ,   c a l l 
   *   g e t V a l u e ( )   f o r   a l l   l e a f   e n t r i e s   a n d   u s e   i n t e r m e d i a t e   l e v e l s   t o   f o r m   n e s t e d 
   *   e l e m e n t   i d s . 
   *   G i v e n   a   s t r i n g   o r   e l e m e n t   t h a t   r e f e r s   t o   a   f o r m ,   c r e a t e   a n   o b j e c t   f r o m   t h e 
   *   e l e m e n t s   o f   t h e   f o r m . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / g e t v a l u e s 
   * / 
 d w r . u t i l . g e t V a l u e s   =   f u n c t i o n ( d a t a ,   o p t i o n s )   { 
     i f   ( t y p e o f   d a t a   = =   " s t r i n g "   | |   d w r . u t i l . _ i s H T M L E l e m e n t ( d a t a ) )   { 
         r e t u r n   d w r . u t i l . g e t F o r m V a l u e s ( d a t a ) ; 
     } 
     e l s e   { 
         v a r   p r e f i x   =   " " ; 
         i f   ( o p t i o n s   ! =   n u l l   & &   o p t i o n s . p r e f i x )   p r e f i x   =   o p t i o n s . p r e f i x ; 
         i f   ( o p t i o n s   ! =   n u l l   & &   o p t i o n s . i d P r e f i x )   p r e f i x   =   o p t i o n s . i d P r e f i x ; 
         d w r . u t i l . _ g e t V a l u e s R e c u r s i v e ( d a t a ,   p r e f i x ) ; 
         r e t u r n   d a t a ; 
     } 
 } ; 
 
 / * * 
   *   G i v e n   a   s t r i n g   o r   e l e m e n t   t h a t   r e f e r s   t o   a   f o r m ,   c r e a t e   a n   o b j e c t   f r o m   t h e 
   *   e l e m e n t s   o f   t h e   f o r m . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / u t i l / g e t v a l u e s 
   * / 
 d w r . u t i l . g e t F o r m V a l u e s   =   f u n c t i o n ( e l e O r N a m e O r I d )   { 
     v a r   e l e   =   n u l l ; 
     i f   ( t y p e o f   e l e O r N a m e O r I d   = =   " s t r i n g " )   { 
         e l e   =   d o c u m e n t . f o r m s [ e l e O r N a m e O r I d ] ; 
         i f   ( e l e   = =   n u l l )   e l e   =   d w r . u t i l . b y I d ( e l e O r N a m e O r I d ) ; 
     } 
     e l s e   i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( e l e O r N a m e O r I d ) )   { 
         e l e   =   e l e O r N a m e O r I d ; 
     } 
     i f   ( e l e   ! =   n u l l )   { 
         i f   ( e l e . e l e m e n t s   = =   n u l l )   { 
             a l e r t ( " g e t F o r m V a l u e s ( )   r e q u i r e s   a n   o b j e c t   o r   r e f e r e n c e   t o   a   f o r m   e l e m e n t . " ) ; 
             r e t u r n   n u l l ; 
         } 
         v a r   r e p l y   =   { } ; 
         v a r   n a m e ; 
         v a r   v a l u e ; 
         f o r   ( v a r   i   =   0 ;   i   <   e l e . e l e m e n t s . l e n g t h ;   i + + )   { 
             i f   ( e l e [ i ] . t y p e   i n   { b u t t o n : 0 , s u b m i t : 0 , r e s e t : 0 , i m a g e : 0 , f i l e : 0 } )   c o n t i n u e ; 
             i f   ( e l e [ i ] . n a m e )   { 
                 n a m e   =   e l e [ i ] . n a m e ; 
                 v a l u e   =   d w r . u t i l . g e t V a l u e ( n a m e ) ; 
             } 
             e l s e   { 
                 i f   ( e l e [ i ] . i d )   n a m e   =   e l e [ i ] . i d ; 
                 e l s e   n a m e   =   " e l e m e n t "   +   i ; 
                 v a l u e   =   d w r . u t i l . g e t V a l u e ( e l e [ i ] ) ; 
             } 
             r e p l y [ n a m e ]   =   v a l u e ; 
         } 
         r e t u r n   r e p l y ; 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   R e c u r s i v e   h e l p e r   f o r   g e t V a l u e s ( ) . 
   * / 
 d w r . u t i l . _ g e t V a l u e s R e c u r s i v e   =   f u n c t i o n ( d a t a ,   i d p a t h )   { 
     / /   A r r a y   c o n t a i n i n g   o b j e c t s   - >   a d d   " [ n ] "   t o   i d p a t h   a n d   m a k e   r e c u r s i v e   c a l l 
     / /   f o r   e a c h   i t e m   o b j e c t 
     i f   ( d w r . u t i l . _ i s A r r a y ( d a t a )   & &   d a t a . l e n g t h   >   0   & &   d w r . u t i l . _ i s O b j e c t ( d a t a [ 0 ] ) )   { 
         f o r   ( v a r   i   =   0 ;   i   <   d a t a . l e n g t h ;   i + + )   { 
             d w r . u t i l . _ g e t V a l u e s R e c u r s i v e ( d a t a [ i ] ,   i d p a t h + " [ " + i + " ] " ) ; 
         } 
     } 
     / /   O b j e c t   ( n o t   a r r a y )   - >   h a n d l e   n e s t e d   o b j e c t   p r o p e r t i e s 
     e l s e   i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a )   & &   ! d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         f o r   ( v a r   p r o p   i n   d a t a )   { 
             v a r   s u b i d p a t h   =   i d p a t h   ?   i d p a t h + " . " + p r o p   :   p r o p ; 
             / /   O b j e c t ,   o r   a r r a y   c o n t a i n i n g   o b j e c t s   - >   c a l l   o u r s e l v e s   r e c u r s i v e l y 
             i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a [ p r o p ] )   & &   ! d w r . u t i l . _ i s A r r a y ( d a t a [ p r o p ] ) 
                     | |   d w r . u t i l . _ i s A r r a y ( d a t a [ p r o p ] )   & &   d a t a [ p r o p ] . l e n g t h   >   0   & &   d w r . u t i l . _ i s O b j e c t ( d a t a [ p r o p ] [ 0 ] ) )   { 
                 d w r . u t i l . _ g e t V a l u e s R e c u r s i v e ( d a t a [ p r o p ] ,   s u b i d p a t h ) ; 
             } 
             / /   F u n c t i o n s   - >   s k i p 
             e l s e   i f   ( t y p e o f   d a t a [ p r o p ]   = =   " f u n c t i o n " )   { 
                 / /   N O P 
             } 
             / /   O n l y   s i m p l e   v a l u e s   l e f t   ( o r   a r r a y   o f   s i m p l e   v a l u e s ,   o r   e m p t y   a r r a y ) 
             / /   - >   c a l l   g e t V a l u e ( ) 
             e l s e   { 
                 / /   A r e   t h e r e   a n y   e l e m e n t s   w i t h   t h a t   i d   o r   n a m e 
                 i f   ( d w r . u t i l . b y I d ( s u b i d p a t h )   ! =   n u l l   | |   d o c u m e n t . g e t E l e m e n t s B y N a m e ( s u b i d p a t h ) . l e n g t h   > =   1 )   { 
                     d a t a [ p r o p ]   =   d w r . u t i l . g e t V a l u e ( s u b i d p a t h ) ; 
                 } 
             } 
         } 
     } 
 } ; 
 
 / * * 
   *   A d d   o p t i o n s   t o   a   l i s t   f r o m   a n   a r r a y   o r   m a p . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / l i s t s 
   * / 
 d w r . u t i l . a d d O p t i o n s   =   f u n c t i o n ( e l e ,   d a t a / * ,   o p t i o n s * / )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " a d d O p t i o n s ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     v a r   u s e O p t i o n s   =   d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " s e l e c t " ) ; 
     v a r   u s e L i   =   d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   [ " u l " ,   " o l " ] ) ; 
     i f   ( ! u s e O p t i o n s   & &   ! u s e L i )   { 
         d w r . u t i l . _ d e b u g ( " a d d O p t i o n s ( )   c a n   o n l y   b e   u s e d   w i t h   s e l e c t / u l / o l   e l e m e n t s .   A t t e m p t   t o   u s e :   "   +   d w r . u t i l . _ d e t a i l e d T y p e O f ( e l e ) ) ; 
         r e t u r n ; 
     } 
     i f   ( d a t a   = =   n u l l )   r e t u r n ; 
 
     v a r   a r g c o u n t   =   a r g u m e n t s . l e n g t h ; 
     v a r   o p t i o n s   =   { } ; 
     v a r   l a s t a r g   =   a r g u m e n t s [ a r g c o u n t   -   1 ] ; 
     i f   ( a r g c o u n t   >   2   & &   d w r . u t i l . _ i s O b j e c t ( l a s t a r g ) )   { 
         o p t i o n s   =   l a s t a r g ; 
         a r g c o u n t - - ; 
     } 
     v a r   a r g 3   =   n u l l ;   i f   ( a r g c o u n t   > =   3 )   a r g 3   =   a r g u m e n t s [ 2 ] ; 
     v a r   a r g 4   =   n u l l ;   i f   ( a r g c o u n t   > =   4 )   a r g 4   =   a r g u m e n t s [ 3 ] ; 
     i f   ( ! o p t i o n s . o p t i o n C r e a t o r   & &   u s e O p t i o n s )   o p t i o n s . o p t i o n C r e a t o r   =   d w r . u t i l . _ d e f a u l t O p t i o n C r e a t o r ; 
     i f   ( ! o p t i o n s . o p t i o n C r e a t o r   & &   u s e L i )   o p t i o n s . o p t i o n C r e a t o r   =   d w r . u t i l . _ d e f a u l t L i s t I t e m C r e a t o r ; 
 
     v a r   t e x t ,   v a l u e ,   l i ; 
     i f   ( d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         / /   L o o p   t h r o u g h   t h e   d a t a   t h a t   w e   d o   h a v e 
         f o r   ( v a r   i   =   0 ;   i   <   d a t a . l e n g t h ;   i + + )   { 
             o p t i o n s . d a t a   =   d a t a [ i ] ; 
             o p t i o n s . t e x t   =   n u l l ; 
             o p t i o n s . v a l u e   =   n u l l ; 
             i f   ( u s e O p t i o n s )   { 
                 i f   ( a r g 3   ! =   n u l l )   { 
                     i f   ( a r g 4   ! =   n u l l )   { 
                         o p t i o n s . t e x t   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ i ] ,   a r g 4 ) ; 
                         o p t i o n s . v a l u e   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ i ] ,   a r g 3 ) ; 
                     } 
                     e l s e   o p t i o n s . t e x t   =   o p t i o n s . v a l u e   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ i ] ,   a r g 3 ) ; 
                 } 
                 e l s e   o p t i o n s . t e x t   =   o p t i o n s . v a l u e   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ i ] ) ; 
 
                 i f   ( o p t i o n s . t e x t   ! =   n u l l   | |   o p t i o n s . v a l u e )   { 
                     v a r   o p t   =   o p t i o n s . o p t i o n C r e a t o r ( o p t i o n s ) ; 
                     o p t . t e x t   =   o p t i o n s . t e x t ; 
                     o p t . v a l u e   =   o p t i o n s . v a l u e ; 
                     e l e . o p t i o n s [ e l e . o p t i o n s . l e n g t h ]   =   o p t ; 
                 } 
             } 
             e l s e   { 
                 o p t i o n s . v a l u e   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ i ] ,   a r g 3 ) ; 
                 i f   ( o p t i o n s . v a l u e   ! =   n u l l )   { 
                     l i   =   o p t i o n s . o p t i o n C r e a t o r ( o p t i o n s ) ; 
                     i f   ( d w r . u t i l . _ s h o u l d E s c a p e H t m l ( o p t i o n s ) )   { 
                         o p t i o n s . v a l u e   =   d w r . u t i l . e s c a p e H t m l ( o p t i o n s . v a l u e ) ; 
                     } 
                     l i . i n n e r H T M L   =   o p t i o n s . v a l u e ; 
                     e l e . a p p e n d C h i l d ( l i ) ; 
                 } 
             } 
         } 
     } 
     e l s e   i f   ( a r g 4   ! =   n u l l )   { 
         i f   ( ! u s e O p t i o n s )   { 
             a l e r t ( " d w r . u t i l . a d d O p t i o n s   c a n   o n l y   c r e a t e   s e l e c t   l i s t s   f r o m   o b j e c t s . " ) ; 
             r e t u r n ; 
         } 
         f o r   ( v a r   p r o p   i n   d a t a )   { 
             o p t i o n s . d a t a   =   d a t a [ p r o p ] ; 
             o p t i o n s . v a l u e   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ p r o p ] ,   a r g 3 ) ; 
             o p t i o n s . t e x t   =   d w r . u t i l . _ g e t V a l u e F r o m ( d a t a [ p r o p ] ,   a r g 4 ) ; 
 
             i f   ( o p t i o n s . t e x t   ! =   n u l l   | |   o p t i o n s . v a l u e )   { 
                 v a r   o p t   =   o p t i o n s . o p t i o n C r e a t o r ( o p t i o n s ) ; 
                 o p t . t e x t   =   o p t i o n s . t e x t ; 
                 o p t . v a l u e   =   o p t i o n s . v a l u e ; 
                 e l e . o p t i o n s [ e l e . o p t i o n s . l e n g t h ]   =   o p t ; 
             } 
         } 
     } 
     e l s e   { 
         i f   ( ! u s e O p t i o n s )   { 
             d w r . u t i l . _ d e b u g ( " d w r . u t i l . a d d O p t i o n s   c a n   o n l y   c r e a t e   s e l e c t   l i s t s   f r o m   o b j e c t s . " ) ; 
             r e t u r n ; 
         } 
         f o r   ( v a r   p r o p   i n   d a t a )   { 
             i f   ( t y p e o f   d a t a [ p r o p ]   = =   " f u n c t i o n " )   c o n t i n u e ; 
             o p t i o n s . d a t a   =   d a t a [ p r o p ] ; 
             i f   ( ! a r g 3 )   { 
                 o p t i o n s . v a l u e   =   p r o p ; 
                 o p t i o n s . t e x t   =   d a t a [ p r o p ] ; 
             } 
             e l s e   { 
                 o p t i o n s . v a l u e   =   d a t a [ p r o p ] ; 
                 o p t i o n s . t e x t   =   p r o p ; 
             } 
             i f   ( o p t i o n s . t e x t   ! =   n u l l   | |   o p t i o n s . v a l u e )   { 
                 v a r   o p t   =   o p t i o n s . o p t i o n C r e a t o r ( o p t i o n s ) ; 
                 o p t . t e x t   =   o p t i o n s . t e x t ; 
                 o p t . v a l u e   =   o p t i o n s . v a l u e ; 
                 e l e . o p t i o n s [ e l e . o p t i o n s . l e n g t h ]   =   o p t ; 
             } 
         } 
     } 
 
     / /   A l l   e r r o r   r o u t e s   t h r o u g h   t h i s   f u n c t i o n   r e s u l t   i n   a   r e t u r n ,   s o   h i g h l i g h t   n o w 
     d w r . u t i l . h i g h l i g h t ( e l e ,   o p t i o n s ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   G e t   t h e   d a t a   f r o m   a n   a r r a y   f u n c t i o n   f o r   d w r . u t i l . a d d O p t i o n s 
   * / 
 d w r . u t i l . _ g e t V a l u e F r o m   =   f u n c t i o n ( d a t a ,   m e t h o d )   { 
     i f   ( m e t h o d   = =   n u l l )   r e t u r n   d a t a ; 
     e l s e   i f   ( t y p e o f   m e t h o d   = =   ' f u n c t i o n ' )   r e t u r n   m e t h o d ( d a t a ) ; 
     e l s e   r e t u r n   d a t a [ m e t h o d ] ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   D e f a u l t   o p t i o n   c r e a t i o n   f u n c t i o n 
   * / 
 d w r . u t i l . _ d e f a u l t O p t i o n C r e a t o r   =   f u n c t i o n ( o p t i o n s )   { 
     r e t u r n   n e w   O p t i o n ( ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   D e f a u l t   l i s t   i t e m   c r e a t i o n   f u n c t i o n 
   * / 
 d w r . u t i l . _ d e f a u l t L i s t I t e m C r e a t o r   =   f u n c t i o n ( o p t i o n s )   { 
     r e t u r n   d o c u m e n t . c r e a t e E l e m e n t ( " l i " ) ; 
 } ; 
 
 / * * 
   *   R e m o v e   a l l   t h e   o p t i o n s   f r o m   a   s e l e c t   l i s t   ( s p e c i f i e d   b y   i d ) 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / l i s t s 
   * / 
 d w r . u t i l . r e m o v e A l l O p t i o n s   =   f u n c t i o n ( e l e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " r e m o v e A l l O p t i o n s ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     v a r   u s e O p t i o n s   =   d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   " s e l e c t " ) ; 
     v a r   u s e L i   =   d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   [ " u l " ,   " o l " ] ) ; 
     i f   ( ! u s e O p t i o n s   & &   ! u s e L i )   { 
         d w r . u t i l . _ d e b u g ( " r e m o v e A l l O p t i o n s ( )   c a n   o n l y   b e   u s e d   w i t h   s e l e c t ,   o l   a n d   u l   e l e m e n t s .   A t t e m p t   t o   u s e :   "   +   d w r . u t i l . _ d e t a i l e d T y p e O f ( e l e ) ) ; 
         r e t u r n ; 
     } 
     i f   ( u s e O p t i o n s )   { 
         e l e . o p t i o n s . l e n g t h   =   0 ; 
     } 
     e l s e   { 
         w h i l e   ( e l e . c h i l d N o d e s . l e n g t h   >   0 )   { 
             e l e . r e m o v e C h i l d ( e l e . f i r s t C h i l d ) ; 
         } 
     } 
 } ; 
 
 / * * 
   *   C r e a t e   r o w s   i n s i d e   a   t h e   t a b l e ,   t b o d y ,   t h e a d   o r   t f o o t   e l e m e n t   ( g i v e n   b y   i d ) . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / t a b l e s 
   * / 
 d w r . u t i l . a d d R o w s   =   f u n c t i o n ( e l e ,   d a t a ,   c e l l F u n c s ,   o p t i o n s )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " a d d R o w s ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     i f   ( ! d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   [ " t a b l e " ,   " t b o d y " ,   " t h e a d " ,   " t f o o t " ] ) )   { 
         d w r . u t i l . _ d e b u g ( " a d d R o w s ( )   c a n   o n l y   b e   u s e d   w i t h   t a b l e ,   t b o d y ,   t h e a d   a n d   t f o o t   e l e m e n t s .   A t t e m p t   t o   u s e :   "   +   d w r . u t i l . _ d e t a i l e d T y p e O f ( e l e ) ) ; 
         r e t u r n ; 
     } 
     i f   ( ! o p t i o n s )   o p t i o n s   =   { } ; 
     i f   ( ! o p t i o n s . r o w C r e a t o r )   o p t i o n s . r o w C r e a t o r   =   d w r . u t i l . _ d e f a u l t R o w C r e a t o r ; 
     i f   ( ! o p t i o n s . c e l l C r e a t o r )   o p t i o n s . c e l l C r e a t o r   =   d w r . u t i l . _ d e f a u l t C e l l C r e a t o r ; 
     v a r   t r ,   r o w N u m ; 
     i f   ( d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         f o r   ( r o w N u m   =   0 ;   r o w N u m   <   d a t a . l e n g t h ;   r o w N u m + + )   { 
             o p t i o n s . r o w D a t a   =   d a t a [ r o w N u m ] ; 
             o p t i o n s . r o w I n d e x   =   r o w N u m ; 
             o p t i o n s . r o w N u m   =   r o w N u m ; 
             o p t i o n s . d a t a   =   n u l l ; 
             o p t i o n s . c e l l N u m   =   - 1 ; 
             t r   =   d w r . u t i l . _ a d d R o w I n n e r ( c e l l F u n c s ,   o p t i o n s ) ; 
             i f   ( t r   ! =   n u l l )   e l e . a p p e n d C h i l d ( t r ) ; 
         } 
     } 
     e l s e   i f   ( t y p e o f   d a t a   = =   " o b j e c t " )   { 
         r o w N u m   =   0 ; 
         f o r   ( v a r   r o w I n d e x   i n   d a t a )   { 
             o p t i o n s . r o w D a t a   =   d a t a [ r o w I n d e x ] ; 
             o p t i o n s . r o w I n d e x   =   r o w I n d e x ; 
             o p t i o n s . r o w N u m   =   r o w N u m ; 
             o p t i o n s . d a t a   =   n u l l ; 
             o p t i o n s . c e l l N u m   =   - 1 ; 
             t r   =   d w r . u t i l . _ a d d R o w I n n e r ( c e l l F u n c s ,   o p t i o n s ) ; 
             i f   ( t r   ! =   n u l l )   e l e . a p p e n d C h i l d ( t r ) ; 
             r o w N u m + + ; 
         } 
     } 
 
     d w r . u t i l . h i g h l i g h t ( e l e ,   o p t i o n s ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   I n t e r n a l   f u n c t i o n   t o   d r a w   a   s i n g l e   r o w   o f   a   t a b l e . 
   * / 
 d w r . u t i l . _ a d d R o w I n n e r   =   f u n c t i o n ( c e l l F u n c s ,   o p t i o n s )   { 
     v a r   t r   =   o p t i o n s . r o w C r e a t o r ( o p t i o n s ) ; 
     i f   ( t r   = =   n u l l )   r e t u r n   n u l l ; 
     f o r   ( v a r   c e l l N u m   =   0 ;   c e l l N u m   <   c e l l F u n c s . l e n g t h ;   c e l l N u m + + )   { 
         v a r   f u n c   =   c e l l F u n c s [ c e l l N u m ] ; 
         i f   ( t y p e o f   f u n c   = =   ' f u n c t i o n ' )   o p t i o n s . d a t a   =   f u n c ( o p t i o n s . r o w D a t a ,   o p t i o n s ) ; 
         e l s e   o p t i o n s . d a t a   =   f u n c   | |   " " ; 
         o p t i o n s . c e l l N u m   =   c e l l N u m ; 
         v a r   t d   =   o p t i o n s . c e l l C r e a t o r ( o p t i o n s ) ; 
         i f   ( t d   ! =   n u l l )   { 
             i f   ( o p t i o n s . d a t a   ! =   n u l l )   { 
                 i f   ( d w r . u t i l . _ i s H T M L E l e m e n t ( o p t i o n s . d a t a ) )   t d . a p p e n d C h i l d ( o p t i o n s . d a t a ) ; 
                 e l s e   { 
                     i f   ( d w r . u t i l . _ s h o u l d E s c a p e H t m l ( o p t i o n s )   & &   t y p e o f ( o p t i o n s . d a t a )   = =   " s t r i n g " )   { 
                         t d . i n n e r H T M L   =   d w r . u t i l . e s c a p e H t m l ( o p t i o n s . d a t a ) ; 
                     } 
                     e l s e   { 
                         t d . i n n e r H T M L   =   o p t i o n s . d a t a ; 
                     } 
                 } 
             } 
             t r . a p p e n d C h i l d ( t d ) ; 
         } 
     } 
     r e t u r n   t r ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   D e f a u l t   r o w   c r e a t i o n   f u n c t i o n 
   * / 
 d w r . u t i l . _ d e f a u l t R o w C r e a t o r   =   f u n c t i o n ( o p t i o n s )   { 
     r e t u r n   d o c u m e n t . c r e a t e E l e m e n t ( " t r " ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   D e f a u l t   c e l l   c r e a t i o n   f u n c t i o n 
   * / 
 d w r . u t i l . _ d e f a u l t C e l l C r e a t o r   =   f u n c t i o n ( o p t i o n s )   { 
     r e t u r n   d o c u m e n t . c r e a t e E l e m e n t ( " t d " ) ; 
 } ; 
 
 / * * 
   *   R e m o v e   a l l   t h e   c h i l d r e n   o f   a   g i v e n   n o d e . 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / b r o w s e r / t a b l e s 
   * / 
 d w r . u t i l . r e m o v e A l l R o w s   =   f u n c t i o n ( e l e ,   o p t i o n s )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " r e m o v e A l l R o w s ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     i f   ( ! o p t i o n s )   o p t i o n s   =   { } ; 
     i f   ( ! o p t i o n s . f i l t e r )   o p t i o n s . f i l t e r   =   f u n c t i o n ( )   {   r e t u r n   t r u e ;   } ; 
     i f   ( ! d w r . u t i l . _ i s H T M L E l e m e n t ( e l e ,   [ " t a b l e " ,   " t b o d y " ,   " t h e a d " ,   " t f o o t " ] ) )   { 
         d w r . u t i l . _ d e b u g ( " r e m o v e A l l R o w s ( )   c a n   o n l y   b e   u s e d   w i t h   t a b l e ,   t b o d y ,   t h e a d   a n d   t f o o t   e l e m e n t s .   A t t e m p t   t o   u s e :   "   +   d w r . u t i l . _ d e t a i l e d T y p e O f ( e l e ) ) ; 
         r e t u r n ; 
     } 
     v a r   c h i l d   =   e l e . f i r s t C h i l d ; 
     v a r   n e x t ; 
     w h i l e   ( c h i l d   ! =   n u l l )   { 
         n e x t   =   c h i l d . n e x t S i b l i n g ; 
         i f   ( o p t i o n s . f i l t e r ( c h i l d ) )   { 
             e l e . r e m o v e C h i l d ( c h i l d ) ; 
         } 
         c h i l d   =   n e x t ; 
     } 
 } ; 
 
 / * * 
   *   d w r . u t i l . b y I d ( e l e ) . c l a s s N a m e   =   " X " ,   t h a t   w e   c a n   c a l l   f r o m   J a v a   e a s i l y . 
   * / 
 d w r . u t i l . s e t C l a s s N a m e   =   f u n c t i o n ( e l e ,   c l a s s N a m e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " s e t C l a s s N a m e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     e l e . c l a s s N a m e   =   c l a s s N a m e ; 
 } ; 
 
 / * * 
   *   d w r . u t i l . b y I d ( e l e ) . c l a s s N a m e   + =   " X " ,   t h a t   w e   c a n   c a l l   f r o m   J a v a   e a s i l y . 
   * / 
 d w r . u t i l . a d d C l a s s N a m e   =   f u n c t i o n ( e l e ,   c l a s s N a m e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " a d d C l a s s N a m e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     e l e . c l a s s N a m e   + =   "   "   +   c l a s s N a m e ; 
 } ; 
 
 / * * 
   *   d w r . u t i l . b y I d ( e l e ) . c l a s s N a m e   - =   " X " ,   t h a t   w e   c a n   c a l l   f r o m   J a v a   e a s i l y 
   *   F r o m   c o d e   o r i g i n a l l y   b y   G a v i n   K i s t n e r 
   * / 
 d w r . u t i l . r e m o v e C l a s s N a m e   =   f u n c t i o n ( e l e ,   c l a s s N a m e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " r e m o v e C l a s s N a m e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     v a r   r e g e x   =   n e w   R e g E x p ( " ( ^ | \ \ s ) "   +   c l a s s N a m e   +   " ( \ \ s | $ ) " ,   ' g ' ) ; 
     e l e . c l a s s N a m e   =   e l e . c l a s s N a m e . r e p l a c e ( r e g e x ,   ' ' ) ; 
 } ; 
 
 / * * 
   *   d w r . u t i l . b y I d ( e l e ) . c l a s s N a m e   | =   " X " ,   t h a t   w e   c a n   c a l l   f r o m   J a v a   e a s i l y . 
   * / 
 d w r . u t i l . t o g g l e C l a s s N a m e   =   f u n c t i o n ( e l e ,   c l a s s N a m e )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " t o g g l e C l a s s N a m e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n ; 
     v a r   r e g e x   =   n e w   R e g E x p ( " ( ^ | \ \ s ) "   +   c l a s s N a m e   +   " ( \ \ s | $ ) " ) ; 
     i f   ( r e g e x . t e s t ( e l e . c l a s s N a m e ) )   { 
         e l e . c l a s s N a m e   =   e l e . c l a s s N a m e . r e p l a c e ( r e g e x ,   ' ' ) ; 
     } 
     e l s e   { 
         e l e . c l a s s N a m e   + =   "   "   +   c l a s s N a m e ; 
     } 
 } ; 
 
 / * * 
   *   C l o n e   a   n o d e   a n d   i n s e r t   i t   i n t o   t h e   d o c u m e n t   j u s t   a b o v e   t h e   ' t e m p l a t e '   n o d e 
   *   @ s e e   h t t p : / / g e t a h e a d . o r g / d w r / ? ? ? 
   * / 
 d w r . u t i l . c l o n e N o d e   =   f u n c t i o n ( e l e ,   o p t i o n s )   { 
     e l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( e l e ,   " c l o n e N o d e ( ) " ) ; 
     i f   ( e l e   = =   n u l l )   r e t u r n   n u l l ; 
     i f   ( o p t i o n s   = =   n u l l )   o p t i o n s   =   { } ; 
     v a r   c l o n e   =   e l e . c l o n e N o d e ( t r u e ) ; 
     i f   ( o p t i o n s . i d P r e f i x   | |   o p t i o n s . i d S u f f i x )   { 
         d w r . u t i l . _ u p d a t e I d s ( c l o n e ,   o p t i o n s ) ; 
     } 
     e l s e   { 
         d w r . u t i l . _ r e m o v e I d s ( c l o n e ) ; 
     } 
     e l e . p a r e n t N o d e . i n s e r t B e f o r e ( c l o n e ,   e l e ) ; 
     r e t u r n   c l o n e ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   U p d a t e   a l l   o f   t h e   i d s   i n   a n   e l e m e n t   t r e e 
   * / 
 d w r . u t i l . _ u p d a t e I d s   =   f u n c t i o n ( e l e ,   o p t i o n s )   { 
     i f   ( o p t i o n s   = =   n u l l )   o p t i o n s   =   { } ; 
     i f   ( e l e . i d )   { 
         e l e . s e t A t t r i b u t e ( " i d " ,   ( o p t i o n s . i d P r e f i x   | |   " " )   +   e l e . i d   +   ( o p t i o n s . i d S u f f i x   | |   " " ) ) ; 
     } 
     v a r   c h i l d r e n   =   e l e . c h i l d N o d e s ; 
     f o r   ( v a r   i   =   0 ;   i   <   c h i l d r e n . l e n g t h ;   i + + )   { 
         v a r   c h i l d   =   c h i l d r e n . i t e m ( i ) ; 
         i f   ( c h i l d . n o d e T y p e   = =   1   / * N o d e . E L E M E N T _ N O D E * / )   { 
             d w r . u t i l . _ u p d a t e I d s ( c h i l d ,   o p t i o n s ) ; 
         } 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   R e m o v e   a l l   t h e   I d s   f r o m   a n   e l e m e n t 
   * / 
 d w r . u t i l . _ r e m o v e I d s   =   f u n c t i o n ( e l e )   { 
     i f   ( e l e . i d )   e l e . r e m o v e A t t r i b u t e ( " i d " ) ; 
     v a r   c h i l d r e n   =   e l e . c h i l d N o d e s ; 
     f o r   ( v a r   i   =   0 ;   i   <   c h i l d r e n . l e n g t h ;   i + + )   { 
         v a r   c h i l d   =   c h i l d r e n . i t e m ( i ) ; 
         i f   ( c h i l d . n o d e T y p e   = =   1   / * N o d e . E L E M E N T _ N O D E * / )   { 
             d w r . u t i l . _ r e m o v e I d s ( c h i l d ) ; 
         } 
     } 
 } ; 
 
 / * * 
   *   C l o n e   a   t e m p l a t e   n o d e   a n d   i t s   e m b e d d e d   t e m p l a t e   c h i l d   n o d e s   a c c o r d i n g   t o 
   *   c a r d i n a l i t i e s   ( o f   a r r a y s )   i n   s u p p l i e d   d a t a . 
   * / 
 d w r . u t i l . c l o n e N o d e F o r V a l u e s   =   f u n c t i o n ( t e m p l a t e E l e ,   d a t a ,   o p t i o n s )   { 
     t e m p l a t e E l e   =   d w r . u t i l . _ g e t E l e m e n t B y I d ( t e m p l a t e E l e ,   " c l o n e N o d e F o r V a l u e s ( ) " ) ; 
     i f   ( t e m p l a t e E l e   = =   n u l l )   r e t u r n   n u l l ; 
     i f   ( o p t i o n s   = =   n u l l )   o p t i o n s   =   { } ; 
     v a r   i d p a t h ; 
     i f   ( o p t i o n s . i d P r e f i x   ! =   n u l l ) 
         i d p a t h   =   o p t i o n s . i d P r e f i x ; 
     e l s e 
         i d p a t h   =   t e m p l a t e E l e . i d   | |   " " ; 
     r e t u r n   d w r . u t i l . _ c l o n e N o d e F o r V a l u e s R e c u r s i v e ( t e m p l a t e E l e ,   d a t a ,   i d p a t h ,   o p t i o n s ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   R e c u r s i v e   h e l p e r   f o r   c l o n e N o d e F o r V a l u e s ( ) . 
   * / 
 d w r . u t i l . _ c l o n e N o d e F o r V a l u e s R e c u r s i v e   =   f u n c t i o n ( t e m p l a t e E l e ,   d a t a ,   i d p a t h ,   o p t i o n s )   { 
     / /   I n c o m i n g   a r r a y   - >   m a k e   a n   i d   f o r   e a c h   i t e m   a n d   c a l l   c l o n e   o f   t h e   t e m p l a t e 
     / /   f o r   e a c h   o f   t h e m 
     i f   ( d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         v a r   c l o n e s   =   [ ] ; 
         f o r   ( v a r   i   =   0 ;   i   <   d a t a . l e n g t h ;   i + + )   { 
             v a r   i t e m   =   d a t a [ i ] ; 
             v a r   c l o n e   =   d w r . u t i l . _ c l o n e N o d e F o r V a l u e s R e c u r s i v e ( t e m p l a t e E l e ,   i t e m ,   i d p a t h   +   " [ "   +   i   +   " ] " ,   o p t i o n s ) ; 
             c l o n e s . p u s h ( c l o n e ) ; 
         } 
         r e t u r n   c l o n e s ; 
     } 
     e l s e 
     / /   I n c o m i n g   o b j e c t   ( n o t   a r r a y )   - >   c l o n e   t h e   t e m p l a t e ,   a d d   i d   p r e f i x e s ,   a d d 
     / /   c l o n e   t o   D O M ,   a n d   t h e n   r e c u r s e   i n t o   a n y   a r r a y   p r o p e r t i e s   i f   t h e y   c o n t a i n 
     / /   o b j e c t s   a n d   t h e r e   i s   a   s u i t a b l e   t e m p l a t e 
     i f   ( d w r . u t i l . _ i s O b j e c t ( d a t a )   & &   ! d w r . u t i l . _ i s A r r a y ( d a t a ) )   { 
         v a r   c l o n e   =   t e m p l a t e E l e . c l o n e N o d e ( t r u e ) ; 
         i f   ( o p t i o n s . u p d a t e C l o n e S t y l e   & &   c l o n e . s t y l e )   { 
             f o r   ( v a r   p r o p n a m e   i n   o p t i o n s . u p d a t e C l o n e S t y l e )   { 
                 c l o n e . s t y l e [ p r o p n a m e ]   =   o p t i o n s . u p d a t e C l o n e S t y l e [ p r o p n a m e ] ; 
             } 
         } 
         d w r . u t i l . _ r e p l a c e I d s ( c l o n e ,   t e m p l a t e E l e . i d ,   i d p a t h ) ; 
         t e m p l a t e E l e . p a r e n t N o d e . i n s e r t B e f o r e ( c l o n e ,   t e m p l a t e E l e ) ; 
         d w r . u t i l . _ c l o n e S u b A r r a y s ( d a t a ,   i d p a t h ,   o p t i o n s ) ; 
         r e t u r n   c l o n e ; 
     } 
 
     / /   I t   i s   a n   e r r o r   t o   e n d   u p   h e r e   s o   w e   r e t u r n   n o t h i n g 
     r e t u r n   n u l l ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   S u b s t i t u t e   a   l e a d i n g   i d p a t h   f r a g m e n t   w i t h   a n o t h e r   i d p a t h   f o r   a l l 
   *   e l e m e n t   i d s   t r e e ,   a n d   r e m o v e   i d s   t h a t   d o n ' t   m a t c h   t h e   i d p a t h . 
   * / 
 d w r . u t i l . _ r e p l a c e I d s   =   f u n c t i o n ( e l e ,   o l d i d p a t h ,   n e w i d p a t h )   { 
     i f   ( e l e . i d )   { 
         v a r   n e w I d   =   n u l l ; 
         i f   ( e l e . i d   = =   o l d i d p a t h )   { 
             n e w I d   =   n e w i d p a t h ; 
         } 
         e l s e   i f   ( e l e . i d . l e n g t h   >   o l d i d p a t h . l e n g t h )   { 
             i f   ( e l e . i d . s u b s t r ( 0 ,   o l d i d p a t h . l e n g t h )   = =   o l d i d p a t h )   { 
                 v a r   t r a i l i n g C h a r   =   e l e . i d . c h a r A t ( o l d i d p a t h . l e n g t h ) ; 
                 i f   ( t r a i l i n g C h a r   = =   " . "   | |   t r a i l i n g C h a r   = =   " [ " )   { 
                     n e w I d   =   n e w i d p a t h   +   e l e . i d . s u b s t r ( o l d i d p a t h . l e n g t h ) ; 
                 } 
             } 
         } 
         i f   ( n e w I d )   { 
             e l e . s e t A t t r i b u t e ( " i d " ,   n e w I d ) ; 
         } 
         e l s e   { 
             e l e . r e m o v e A t t r i b u t e ( " i d " ) ; 
         } 
     } 
     v a r   c h i l d r e n   =   e l e . c h i l d N o d e s ; 
     f o r   ( v a r   i   =   0 ;   i   <   c h i l d r e n . l e n g t h ;   i + + )   { 
         v a r   c h i l d   =   c h i l d r e n . i t e m ( i ) ; 
         i f   ( c h i l d . n o d e T y p e   = =   1   / * N o d e . E L E M E N T _ N O D E * / )   { 
             d w r . u t i l . _ r e p l a c e I d s ( c h i l d ,   o l d i d p a t h ,   n e w i d p a t h ) ; 
         } 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   F i n d s   a r r a y s   i n   s u p p l i e d   d a t a   a n d   u s e s   a n y   c o r r e s p o n d i n g   t e m p l a t e 
   *   n o d e   t o   m a k e   a   c l o n e   f o r   e a c h   i t e m   i n   t h e   a r r a y . 
   * / 
 d w r . u t i l . _ c l o n e S u b A r r a y s   =   f u n c t i o n ( d a t a ,   i d p a t h ,   o p t i o n s )   { 
     f o r   ( p r o p   i n   d a t a )   { 
         v a r   v a l u e   =   d a t a [ p r o p ] ; 
         / /   L o o k   f o r   p o t e n t i a l   r e c u r s i v e   c l o n i n g   i n   a l l   a r r a y   p r o p e r t i e s 
         i f   ( d w r . u t i l . _ i s A r r a y ( v a l u e ) )   { 
             / /   O n l y   a r r a y s   w i t h   o b j e c t s   a r e   i n t e r e s t i n g   f o r   c l o n i n g 
             i f   ( v a l u e . l e n g t h   >   0   & &   d w r . u t i l . _ i s O b j e c t ( v a l u e [ 0 ] ) )   { 
                 v a r   s u b T e m p l a t e I d   =   i d p a t h   +   " . "   +   p r o p ; 
                 v a r   s u b T e m p l a t e E l e   =   d w r . u t i l . b y I d ( s u b T e m p l a t e I d ) ; 
                 i f   ( s u b T e m p l a t e E l e   ! =   n u l l )   { 
                     d w r . u t i l . _ c l o n e N o d e F o r V a l u e s R e c u r s i v e ( s u b T e m p l a t e E l e ,   v a l u e ,   s u b T e m p l a t e I d ,   o p t i o n s ) ; 
                 } 
             } 
         } 
         / /   C o n t i n u e   l o o k i n g   f o r   a r r a y s   i n   o b j e c t   p r o p e r t i e s 
         e l s e   i f   ( d w r . u t i l . _ i s O b j e c t ( v a l u e ) )   { 
             d w r . u t i l . _ c l o n e S u b A r r a y s ( v a l u e ,   i d p a t h   +   " . "   +   p r o p ,   o p t i o n s ) ; 
         } 
     } 
 } ; 
 
 / * * 
   *   @ p r i v a t e   H e l p e r   t o   t u r n   a   s t r i n g   i n t o   a n   e l e m e n t   w i t h   a n   e r r o r   m e s s a g e 
   * / 
 d w r . u t i l . _ g e t E l e m e n t B y I d   =   f u n c t i o n ( e l e ,   s o u r c e )   { 
     v a r   o r i g   =   e l e ; 
     e l e   =   d w r . u t i l . b y I d ( e l e ) ; 
     i f   ( e l e   = =   n u l l )   { 
         d w r . u t i l . _ d e b u g ( s o u r c e   +   "   c a n ' t   f i n d   a n   e l e m e n t   w i t h   i d :   "   +   o r i g   +   " . " ) ; 
     } 
     r e t u r n   e l e ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   I s   t h e   g i v e n   n o d e   a n   H T M L   e l e m e n t   ( o p t i o n a l l y   o f   a   g i v e n   t y p e ) ? 
   *   @ p a r a m   e l e   T h e   e l e m e n t   t o   t e s t 
   *   @ p a r a m   n o d e N a m e   e g   " i n p u t " ,   " t e x t a r e a "   -   c h e c k   f o r   n o d e   n a m e   ( o p t i o n a l ) 
   *                   i f   n o d e N a m e   i s   a n   a r r a y   t h e n   c h e c k   a l l   f o r   a   m a t c h . 
   * / 
 d w r . u t i l . _ i s H T M L E l e m e n t   =   f u n c t i o n ( e l e ,   n o d e N a m e )   { 
     i f   ( e l e   = =   n u l l   | |   t y p e o f   e l e   ! =   " o b j e c t "   | |   e l e . n o d e N a m e   = =   n u l l )   { 
         r e t u r n   f a l s e ; 
     } 
     i f   ( n o d e N a m e   ! =   n u l l )   { 
         v a r   t e s t   =   e l e . n o d e N a m e . t o L o w e r C a s e ( ) ; 
         i f   ( t y p e o f   n o d e N a m e   = =   " s t r i n g " )   { 
             r e t u r n   t e s t   = =   n o d e N a m e . t o L o w e r C a s e ( ) ; 
         } 
         i f   ( d w r . u t i l . _ i s A r r a y ( n o d e N a m e ) )   { 
             v a r   m a t c h   =   f a l s e ; 
             f o r   ( v a r   i   =   0 ;   i   <   n o d e N a m e . l e n g t h   & &   ! m a t c h ;   i + + )   { 
                 i f   ( t e s t   = =   n o d e N a m e [ i ] . t o L o w e r C a s e ( ) )   { 
                     m a t c h   =     t r u e ; 
                 } 
             } 
             r e t u r n   m a t c h ; 
         } 
         d w r . u t i l . _ d e b u g ( " d w r . u t i l . _ i s H T M L E l e m e n t   w a s   p a s s e d   t e s t   n o d e   n a m e   t h a t   i s   n e i t h e r   a   s t r i n g   o r   a r r a y   o f   s t r i n g s " ) ; 
         r e t u r n   f a l s e ; 
     } 
     r e t u r n   t r u e ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   L i k e   t y p e O f   e x c e p t   t h a t   m o r e   i n f o r m a t i o n   f o r   a n   o b j e c t   i s   r e t u r n e d   o t h e r   t h a n   " o b j e c t " 
   * / 
 d w r . u t i l . _ d e t a i l e d T y p e O f   =   f u n c t i o n ( x )   { 
     v a r   r e p l y   =   t y p e o f   x ; 
     i f   ( r e p l y   = =   " o b j e c t " )   { 
         r e p l y   =   O b j e c t . p r o t o t y p e . t o S t r i n g . a p p l y ( x ) ;   / /   R e t u r n s   " [ o b j e c t   c l a s s ] " 
         r e p l y   =   r e p l y . s u b s t r i n g ( 8 ,   r e p l y . l e n g t h - 1 ) ;     / /   J u s t   g e t   t h e   c l a s s   b i t 
     } 
     r e t u r n   r e p l y ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   O b j e c t   d e t e c t o r .   E x c l u d i n g   n u l l   f r o m   o b j e c t s . 
   * / 
 d w r . u t i l . _ i s O b j e c t   =   f u n c t i o n ( d a t a )   { 
     r e t u r n   ( d a t a   & &   t y p e o f   d a t a   = =   " o b j e c t " ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   A r r a y   d e t e c t o r .   N o t e :   i n s t a n c e o f   d o e s n ' t   w o r k   w i t h   m u l t i p l e   f r a m e s . 
   * / 
 d w r . u t i l . _ i s A r r a y   =   f u n c t i o n ( d a t a )   { 
     r e t u r n   ( d a t a   & &   d a t a . j o i n ) ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   D a t e   d e t e c t o r .   N o t e :   i n s t a n c e o f   d o e s n ' t   w o r k   w i t h   m u l t i p l e   f r a m e s . 
   * / 
 d w r . u t i l . _ i s D a t e   =   f u n c t i o n ( d a t a )   { 
     r e t u r n   ( d a t a   & &   d a t a . t o U T C S t r i n g )   ?   t r u e   :   f a l s e ; 
 } ; 
 
 / * * 
   *   @ p r i v a t e   U s e d   b y   s e t V a l u e .   G e t s   a r o u n d   t h e   m i s s i n g   f u n c t i o n a l l i t y   i n   I E . 
   * / 
 d w r . u t i l . _ i m p o r t N o d e   =   f u n c t i o n ( d o c ,   i m p o r t e d N o d e ,   d e e p )   { 
     v a r   n e w N o d e ; 
 
     i f   ( i m p o r t e d N o d e . n o d e T y p e   = =   1   / * N o d e . E L E M E N T _ N O D E * / )   { 
         n e w N o d e   =   d o c . c r e a t e E l e m e n t ( i m p o r t e d N o d e . n o d e N a m e ) ; 
 
         f o r   ( v a r   i   =   0 ;   i   <   i m p o r t e d N o d e . a t t r i b u t e s . l e n g t h ;   i + + )   { 
             v a r   a t t r   =   i m p o r t e d N o d e . a t t r i b u t e s [ i ] ; 
             i f   ( a t t r . n o d e V a l u e   ! =   n u l l   & &   a t t r . n o d e V a l u e   ! =   ' ' )   { 
                 n e w N o d e . s e t A t t r i b u t e ( a t t r . n a m e ,   a t t r . n o d e V a l u e ) ; 
             } 
         } 
 
         i f   ( t y p e o f   i m p o r t e d N o d e . s t y l e   ! =   " u n d e f i n e d " )   { 
             n e w N o d e . s t y l e . c s s T e x t   =   i m p o r t e d N o d e . s t y l e . c s s T e x t ; 
         } 
     } 
     e l s e   i f   ( i m p o r t e d N o d e . n o d e T y p e   = =   3   / * N o d e . T E X T _ N O D E * / )   { 
         n e w N o d e   =   d o c . c r e a t e T e x t N o d e ( i m p o r t e d N o d e . n o d e V a l u e ) ; 
     } 
 
     i f   ( d e e p   & &   i m p o r t e d N o d e . h a s C h i l d N o d e s ( ) )   { 
         f o r   ( i   =   0 ;   i   <   i m p o r t e d N o d e . c h i l d N o d e s . l e n g t h ;   i + + )   { 
             n e w N o d e . a p p e n d C h i l d ( d w r . u t i l . _ i m p o r t N o d e ( d o c ,   i m p o r t e d N o d e . c h i l d N o d e s [ i ] ,   t r u e ) ) ; 
         } 
     } 
 
     r e t u r n   n e w N o d e ; 
 } ; 
 
 / * *   @ p r i v a t e   U s e d   i n t e r n a l l y   w h e n   s o m e   m e s s a g e   n e e d s   t o   g e t   t o   t h e   p r o g r a m m e r   * / 
 d w r . u t i l . _ d e b u g   =   f u n c t i o n ( m e s s a g e ,   s t a c k t r a c e )   { 
     v a r   w r i t t e n   =   f a l s e ; 
     t r y   { 
         i f   ( w i n d o w . c o n s o l e )   { 
             i f   ( s t a c k t r a c e   & &   w i n d o w . c o n s o l e . t r a c e )   w i n d o w . c o n s o l e . t r a c e ( ) ; 
             w i n d o w . c o n s o l e . l o g ( m e s s a g e ) ; 
             w r i t t e n   =   t r u e ; 
         } 
         e l s e   i f   ( w i n d o w . o p e r a   & &   w i n d o w . o p e r a . p o s t E r r o r )   { 
             w i n d o w . o p e r a . p o s t E r r o r ( m e s s a g e ) ; 
             w r i t t e n   =   t r u e ; 
         } 
     } 
     c a t c h   ( e x )   {   / *   i g n o r e   * /   } 
 
     i f   ( ! w r i t t e n )   { 
         v a r   d e b u g   =   d o c u m e n t . g e t E l e m e n t B y I d ( " d w r - d e b u g " ) ; 
         i f   ( d e b u g )   { 
             v a r   c o n t e n t s   =   m e s s a g e   +   " < b r / > "   +   d e b u g . i n n e r H T M L ; 
             i f   ( c o n t e n t s . l e n g t h   >   2 0 4 8 )   c o n t e n t s   =   c o n t e n t s . s u b s t r i n g ( 0 ,   2 0 4 8 ) ; 
             d e b u g . i n n e r H T M L   =   c o n t e n t s ; 
         } 
     } 
 } ; 
 
   o       https://d1e7kr0efngifs.cloudfront.net/3500.5.0-rel.17+9a607af/javascript/dwr/util.js?v=3500.5.0-rel.17+9a607af     Þ³      Þ³                              š    @   æÖ    [    ›    Qæš    5   @   æš    [   6   Qæš   @   æÖ   š    5   ›   Qæš    5   C6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6	   Qš    5   ‚   6
   Qš    5   ‚   6   Qš    5   ‚	   6   Qš   5       æš    5   ‚
   6   Q+   æš   5      æš    5   ‚   6   Qæš        æÖ   š    5   5   ›   Qæš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   P   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   P   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   @6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6   Qš    5   ‚   6    Qš    5   ‚   6!   Qš    5   ‚   6"   Qš    5   ‚   6#   Qš    5   ‚   6$   Qš    5   ‚   6%   Qš    5   ‚    6&   Qš    5   ‚!   6'   Qš    5   ‚"   6(   Qš    5   ‚#   6)   Qš    5   ‚$   6*   Qš    5   ‚%   6+   Qš    5   ‚&   6,   Qš    5   ‚'   6-   Qš    5   ‚(   6.   Qš    5   ‚)   6/   Qš    5   ‚*   60   Qš    5   ‚+   61   Qš    5   ‚,   62   Qš    5   ‚-   63   Qš    5   ‚.   64   Qš    5   ‚/   65   Qš    5   ‚0   66   Qš    5   ‚1   67   Qš    5   ‚2   68   Qš    5   ‚3   69   Qš    5   ‚4   6:   Qš    5   ‚5   6;   Qš    5   ‚6   6<   Qš    5   ‚7   6=   Qš    5   ‚8   6>   Qš    5   ‚9   6?   Qš    5   ‚:   6@   Qš    5   ‚;   6A   Qš    5   ‚<   6B   Qš    5   ‚=   6C   Q™È§–Ñ˜Ì–Ñ˜–Ö Ñ Õ #Õ .Õ 6Õ >Õ KÕ WÕ `Õ sÊžÛ €  ƒÊžÖ €  ˜˜žÛ €  ¡Õ € [Õ € ŠÕ € ‘Õ˜˜˜Õ˜Õ € £Õ € ¨Õ˜Õ € ·Õ € ¿Ñ € ÄÕ € ÑÕ € )Õ € HÕ € cÕ € ÆÕ € ßÕ € éÕ € Õ € $Õ € IÕ € nÕ € ÜÕ € åÕ € ìÕ € ôÕ € Õ € 5Õ € SÕ € ZÕ € bÕ € yÕ € ‚Õ € ŒÕ € –Õ € ¦Õ € ¸Õ € ÉÕ € ØÕ € çÕ € Õ € .Õ € FÕ € UÕ € pÕ € |Õ € ƒÕ € ŠÕ € ‘Õ € °Õ € É    dwr   DWRUtil   $	   util   _escapeHtml   setEscapeHtml#   _shouldEscapeHtml   escapeHtml   unescapeHtml)   replaceXmlCharacters5   containsXssRiskyCharacters   onReturn   selectRange   document   getElementById	   byId   all'   toDescriptiveString#   useLoadingMessage'   setHighlightHandler5   yellowFadeHighlightHandler!   _yellowFadeSteps%   _yellowFadeProcess5   borderFadeHighlightHandler!   _borderFadeSteps%   _borderFadeProcess+   focusHighlightHandler#   _highlightHandler   highlight   setValue!   _selectListItems   _selectListItem   getValue   getText   setValues'   _setValuesRecursive   getValues   getFormValues'   _getValuesRecursive   addOptions   _getValueFrom+   _defaultOptionCreator/   _defaultListItemCreator!   removeAllOptions   addRows   _addRowInner%   _defaultRowCreator'   _defaultCellCreator   removeAllRows   setClassName   addClassName   removeClassName   toggleClassName   cloneNode   _updateIds   _removeIds%   cloneNodeForValues9   _cloneNodeForValuesRecursive   _replaceIds   _cloneSubArrays   _getElementById   _isHTMLElement   _detailedTypeOf   _isObject   _isArray   _isDate   _importNode   _debug‡!«!ÿÿÿÿ      dwr   DWRUtil   $      «+’HŽ!«!            Ž!«!            !«!       -   dwr.util.setEscapeHtmlb ²  ç  ª  ç     !          Ê5ž !«!       5   dwr.util._shouldEscapeHtmlb k  é  c  é  #   %          Ê5ž!«!       '   dwr.util.escapeHtmlb _  À  W  À  .             Ê5ž!«!       +   dwr.util.unescapeHtmlb C  ¤  ;  ¤  6              Ê5ž!«!       ;   dwr.util.replaceXmlCharactersb 5  9  -  9  >   (          Ê5ž!«!       G   dwr.util.containsXssRiskyCharactersb É  	  Á  	  K   .          Ê5ž!«!       #   dwr.util.onReturnb )
  Ÿ
  !
  Ÿ
  W             Ê5ž!«!       )   dwr.util.selectRangeb X  Û  P  Û  `             Ê5ž !«!          dwr.util.byIdb  ˜  ó    ó  t      !       Ê5ž !«!          dwr.util.byIdb  *  z  "  z  „      !       Ê5ž !«!       9   dwr.util.toDescriptiveStringb Ë  ()  Ã  ()  ¡   '   0       #   skipDomProperties    recursive    indent      recursive \  '(  J  '(  Á      ð          indentDepth    options    B R  þ  J  þ  Ñ   1          Ê5ž   B Z  8  R  8  Ú   1          Ê5žÊ5ž      indent :(  ö(  +(  ö(  K            Ê5žÊ5ž!«!       5   dwr.util.useLoadingMessageb ¿)  0  ·)  0  [  %             loadingMessage   B  M*  E/  E*  E/  _             Ê5ž    B  i/  0  a/  0    !          Ê5žÊ5ž!«!       9   dwr.util.setHighlightHandlerb e0  š0  ]0  š0  Š  '          Ê5ž !«!       G   dwr.util.yellowFadeHighlightHandlerb ó0  #1  ë0  #1  ‘  .          Ê5žŽ!«!      Ž!«!   d0Ž!«!   b0Ž!«!   a0Ž!«!   90Ž!«!   98Ž!«!   a0Ž!«!   a8Ž!«!   b0Ž!«!   b8Ž!«!   c0Ž!«!   c8Ž!«!   d0Ž!«!   d8Ž!«!   e0Ž!«!   e8Ž!«!   f0Ž!«!   f8    !«!       7   dwr.util._yellowFadeProcessb Ñ1  )3  É1  )3  •  &          Ê5ž!«!       G   dwr.util.borderFadeHighlightHandlerb ‚3  ö3  z3  ö3  £  .          Ê5žŽ!«!      Ž!«!   d0Ž!«!   b0Ž!«!   a0Ž!«!   90Ž!«!   98Ž!«!   a0Ž!«!   a8Ž!«!   b0Ž!«!   b8Ž!«!   c0Ž!«!   c8Ž!«!   d0Ž!«!   d8Ž!«!   e0Ž!«!   e8Ž!«!   f0Ž!«!   f8    !«!       7   dwr.util._borderFadeProcessb ¤4  6  œ4  6  ©  &          Ê5ž!«!       =   dwr.util.focusHighlightHandlerb o6  ³6  g6  ³6  ·  )           Ê5ž!«!       %   dwr.util.highlightb [7  98  S7  98  Ä            Ê5ž !«!       #   dwr.util.setValueb Ï8  ZB  Ç8  ZB  Ñ     €       Ê5ž !«!       3   dwr.util._selectListItemsb -C  ÃE  %C  ÃE  )  $   8       Ê5ž!«!       1   dwr.util._selectListItemb ‚F  ´H  zF  ´H  H  #   (       Ê5ž !«!       #   dwr.util.getValueb EI  §S  =I  §S  c     È       Ê5ž!«!       !   dwr.util.getTextb iT  ŒV  aT  ŒV  Æ             Ê5ž!«!       %   dwr.util.setValuesb –W  bX  ŽW  bX  ß            Ê5ž !«!       9   dwr.util._setValuesRecursiveb ÁX  í]  ¹X  í]  é  '   H       Ê5ž !«!       %   dwr.util.getValuesb ^_  Ï`  V_  Ï`              Ê5ž !«!       -   dwr.util.getFormValuesb ™a  e  ‘a  e  $  !   @       Ê5ž!«!       9   dwr.util._getValuesRecursiveb ~e  Ÿj  ve  Ÿj  I  '   H       Ê5ž !«!       '   dwr.util.addOptionsb %k  y  k  y  n     ±       Ê5ž !«!       -   dwr.util._getValueFromb „y  z  |y  z  Ü  !          Ê5ž !«!       =   dwr.util._defaultOptionCreatorb sz  —z  kz  —z  å  )          Ê5ž !«!       A   dwr.util._defaultListItemCreatorb ýz  1{  õz  1{  ì  +          Ê5ž !«!       3   dwr.util.removeAllOptionsb Í{  ö}  Å{  ö}  ô  $   (       Ê5ž!«!       !   dwr.util.addRowsb ›~  Àƒ  “~  Àƒ       0       Ê5ž!«!       +   dwr.util._addRowInnerb *„  q‡  "„  q‡  5      8       Ê5ž!«!       7   dwr.util._defaultRowCreatorb Ì‡   ˆ  Ä‡   ˆ  S  &          Ê5ž!«!       9   dwr.util._defaultCellCreatorb ]ˆ  ‘ˆ  Uˆ  ‘ˆ  Z  '          Ê5ž !«!       -   dwr.util.removeAllRowsb ‰  “‹  ‰  “‹  b  !             B  Ì‰  ß‰  Ä‰  ß‰  f  0          Ê5ž Ê5ž!«!       +   dwr.util.setClassNameb Œ  Œ   Œ  Œ  y             Ê5ž!«!       +   dwr.util.addClassNameb     ûŒ    ‚             Ê5ž!«!       1   dwr.util.removeClassNameb 0Ž    (Ž    Œ  #          Ê5ž !«!       1   dwr.util.toggleClassNameb Š  Â  ‚  Â  –  #          Ê5ž !«!       %   dwr.util.cloneNodeb ]‘  Ð’  U‘  Ð’  ¦            Ê5ž !«!       '   dwr.util._updateIdsb .“  ®”  &“  ®”  ¸             Ê5ž !«!       '   dwr.util._removeIdsb •  
–  þ”  
–  É            Ê5ž!«!       7   dwr.util.cloneNodeForValuesb ¶–  =˜  ®–  =˜  Ø  &          Ê5ž!«!       K   dwr.util._cloneNodeForValuesRecursiveb ¯˜  \  §˜  \  ç  0   0       Ê5ž !«!       )   dwr.util._replaceIdsb ž  -¡  ž  -¡       P       Ê5ž!«!       1   dwr.util._cloneSubArraysb Ý¡  Ê¤  Õ¡  Ê¤  .  #   0       Ê5ž!«!       1   dwr.util._getElementByIdb B¥  ÷¥  :¥  ÷¥  F  #          Ê5ž!«!       /   dwr.util._isHTMLElementb §  ¹©  §  ¹©  U  "   8       Ê5ž!«!       1   dwr.util._detailedTypeOfb Jª  /«  Bª  /«  p  #          Ê5ž!«!       %   dwr.util._isObjectb ‘«  Ç«  ‰«  Ç«  |            Ê5ž !«!       #   dwr.util._isArrayb >¬  f¬  6¬  f¬  ƒ            Ê5ž!«!       !   dwr.util._isDateb Û¬  ­  Ó¬  ­  Š            Ê5ž !«!       )   dwr.util._importNodeb ­  ð°  ‡­  ð°  ‘     @       Ê5ž!«!          dwr.util._debugb ^±  Û³  V±  Û³  °     @       Ê5ž š˜;øÝ‡æò~      
\[\[?Ô+\   o    :https://d1e7kr0efngifs.cloudfront.net/3500.5.0-rel.17+9a607af/javascript/dwr/util.js?v=3500.5.0-rel.17+9a607af necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Content-Length: 46046
Last-Modified: Tue, 04 Dec 2018 17:42:10 GMT
Accept-Ranges: bytes
Server: AmazonS3
Date: Wed, 12 Dec 2018 03:57:36 GMT
ETag: "e8110c9dd9f8aed5ce2090fc115dd1c7"
Age: 54196
X-Cache: Hit from cloudfront
Via: 1.1 263d97c176fc51d1d08116820c013de4.cloudfront.net (CloudFront)
X-Amz-Cf-Id: d-kwJHZn4y2FLy42IFZLFiJ2_wvfbLCsA6rfcRAEI-hngBf_SK8Fxg==
 original-response-headers Content-Type: application/javascript
Content-Length: 46046
Connection: keep-alive
Last-Modified: Tue, 04 Dec 2018 17:42:10 GMT
Accept-Ranges: bytes
Server: AmazonS3
Date: Wed, 12 Dec 2018 03:57:36 GMT
ETag: "e8110c9dd9f8aed5ce2090fc115dd1c7"
Age: 54196
X-Cache: Hit from cloudfront
Via: 1.1 263d97c176fc51d1d08116820c013de4.cloudfront.net (CloudFront)
X-Amz-Cf-Id: d-kwJHZn4y2FLy42IFZLFiJ2_wvfbLCsA6rfcRAEI-hngBf_SK8Fxg==
 uncompressed-len 0 net-response-time-onstart 47 net-response-time-onstop 47 alt-data 1;46046,javascript/moz-bytecode-20181009141245 alt-data-from-child 1  ?
